/*! For license information please see newrelic-video-html5.min.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Html5Tracker=t():e.Html5Tracker=t()}(self,()=>(()=>{"use strict";var e={298:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(r(555)),i=s(r(330));function s(e){return e&&e.__esModule?e:{default:e}}class a extends n.default.VideoTracker{static isUsing(e){return e.ima&&void 0!==self.google}getTrackerName(){return"ima-ads"}getTrackerVersion(){return i.default.version}isMuted(){return this.player.muted}getPlayerName(){return"html5-ads"}getPlayerVersion(){return"ima: "+google.ima.VERSION}getCuePoints(){return this.player.ima.getAdsManager().getCuePoints()}getAdPosition(){if(this.lastAdData&&this.lastAdData.podInfo&&void 0!==this.lastAdData.podInfo.podIndex){const e=this.lastAdData.podInfo.podIndex;return 0===e?"pre":-1===e?"post":"mid"}return null}getDuration(){return this.lastAdData&&void 0!==this.lastAdData.duration?1e3*this.lastAdData.duration:null}getVideoId(){return this.lastAdData&&this.lastAdData.adId?this.lastAdData.adId:null}getAdCreativeId(){return this.lastAdData&&this.lastAdData.creativeId?this.lastAdData.creativeId:null}getSrc(){return this.lastAdData&&this.lastAdData.mediaUrl?this.lastAdData.mediaUrl:null}getTitle(){return this.lastAdData&&this.lastAdData.title?this.lastAdData.title:null}getPlayhead(){let e=this.player.ima.getAdsManager();if(e)return 1e3*(this.getDuration()-e.getRemainingTime())}getPlayrate(){return this.player.playbackRate}getAdPartner(){return"ima"}registerListeners(){let e=google.ima.AdEvent.Type,t=google.ima.AdErrorEvent.Type.AD_ERROR;this.lastAdData=null,n.default.Log.debugCommonVideoEvents(this.player.ima.addEventListener,[null,e.ALL_ADS_COMPLETED,e.LINEAR_CHANGED,e.COMPLETE,e.USER_CLOSE,e.CONTENT_PAUSE_REQUESTED,e.CONTENT_RESUME_REQUESTED,e.SKIPPED,e.SKIPPABLE_STATE_CHANGED,e.LOADED,e.PAUSED,e.RESUMED,e.STARTED,e.AD_CAN_PLAY,e.AD_METADATA,e.EXPANDED_CHANGED,e.AD_BREAK_READY,e.LOG,e.CLICK,e.FIRST_QUARTILE,e.MIDPOINT,e.THIRD_QUARTILE,t]),this.onLoaded=this.onLoaded.bind(this),this.onStart=this.onStart.bind(this),this.onPaused=this.onPaused.bind(this),this.onResumed=this.onResumed.bind(this),this.onComplete=this.onComplete.bind(this),this.onSkipped=this.onSkipped.bind(this),this.onClick=this.onClick.bind(this),this.onFirstQuartile=this.onFirstQuartile.bind(this),this.onMidpoint=this.onMidpoint.bind(this),this.onThirdQuartile=this.onThirdQuartile.bind(this),this.onError=this.onError.bind(this),this.player.ima.addEventListener(e.LOADED,this.onLoaded),this.player.ima.addEventListener(e.STARTED,this.onStart),this.player.ima.addEventListener(e.PAUSED,this.onPaused),this.player.ima.addEventListener(e.RESUMED,this.onResumed),this.player.ima.addEventListener(e.COMPLETE,this.onComplete),this.player.ima.addEventListener(e.SKIPPED,this.onSkipped),this.player.ima.addEventListener(e.CLICK,this.onClick),this.player.ima.addEventListener(e.FIRST_QUARTILE,this.onFirstQuartile),this.player.ima.addEventListener(e.MIDPOINT,this.onMidpoint),this.player.ima.addEventListener(e.THIRD_QUARTILE,this.onThirdQuartile),this.player.ima.addEventListener(t,this.onError)}unregisterListeners(){let e=google.ima.AdEvent.Type,t=google.ima.AdErrorEvent.Type.AD_ERROR;this.player.ima.removeEventListener(e.LOADED,this.onLoaded),this.player.ima.removeEventListener(e.STARTED,this.onStart),this.player.ima.removeEventListener(e.PAUSED,this.onPaused),this.player.ima.removeEventListener(e.RESUMED,this.onResumed),this.player.ima.removeEventListener(e.COMPLETE,this.onComplete),this.player.ima.removeEventListener(e.SKIPPED,this.onSkipped),this.player.ima.removeEventListener(e.CLICK,this.onClick),this.player.ima.removeEventListener(e.FIRST_QUARTILE,this.onFirstQuartile),this.player.ima.removeEventListener(e.MIDPOINT,this.onMidpoint),this.player.ima.removeEventListener(e.THIRD_QUARTILE,this.onThirdQuartile),this.player.ima.removeEventListener(t,this.onError),this.lastAdData=null}onLoaded(e){this.lastAdData=this.getAdData(),this.sendRequest()}onStart(e){this.lastAdData=this.getAdData(),this.sendStart()}onComplete(e){this.sendEnd(),this.lastAdData=null}onSkipped(e){this.sendEnd({skipped:!0}),this.lastAdData=null}onError(e){const t=e.getError(),r=t.getErrorCode(),n=t.getMessage();this.sendError({adError:t,errorCode:r,errorMessage:n})}onClick(e){this.sendAdClick()}onFirstQuartile(){this.sendAdQuartile({adQuartile:1})}onMidpoint(){this.sendAdQuartile({adQuartile:2})}onThirdQuartile(){this.sendAdQuartile({adQuartile:3})}onPaused(){this.sendPause()}onResumed(){this.sendResume()}getAdData(){try{const e=this.player.ima.getAdsManager();if(e){const t=e.getCurrentAd();if(t)return{adId:t.getAdId(),creativeId:t.getCreativeId(),duration:t.getDuration(),mediaUrl:t.getMediaUrl(),title:t.getTitle(),podInfo:t.getAdPodInfo()&&t.getAdPodInfo().data}}return null}catch(e){return null}}}t.default=a},302:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(555)),i=a(r(330)),s=a(r(298));function a(e){return e&&e.__esModule?e:{default:e}}class o extends n.default.VideoTracker{constructor(e,t){super(e,t),this.on("*",function(e){console.log("[HTML5 Tracker] ðŸ“¤ Event emitted:",e.type,e.eventType)}),n.default.Core.addTracker(this,t)}getTrackerName(){return"html5"}getPlayerName(){return"HTML5"}getInstrumentationProvider(){return"New Relic"}getInstrumentationName(){return this.getPlayerName()}getInstrumentationVersion(){return this.getPlayerVersion()}getPlayerVersion(){return i.default.version}getPlayhead(){return 1e3*this.player.currentTime}getDuration(){return 1e3*this.player.duration}getSrc(){return this.player.currentSrc}isMuted(){return this.player.muted}getRenditionHeight(){return this.player.videoHeight}getRenditionWidth(){return this.player.videoWidth}getPlayrate(){return this.player.playbackRate}isAutoplayed(){return this.player.autoplay}getPreload(){return this.player.preload}onAdsready(){this.adsTracker||s.default.isUsing(this.player)&&this.setAdsTracker(new s.default(this.player))}onAdStart(){this.currentAdPlaying=!0,this.imaAdCuePoints||(this.imaAdCuePoints=this.player&&this.player.ima&&this.player.ima.getAdsManager().getCuePoints())}onAdEnd(){this.isContentEnd&&this.sendEnd()}registerListeners(){n.default.Log.debugCommonVideoEvents(this.player),this.onDownload=this.onDownload.bind(this),this.onAdsready=this.onAdsready.bind(this),this.onAdStart=this.onAdStart.bind(this),this.onAdEnd=this.onAdEnd.bind(this),this.onPlay=this.onPlay.bind(this),this.onPlaying=this.onPlaying.bind(this),this.onPause=this.onPause.bind(this),this.onSeeking=this.onSeeking.bind(this),this.onSeeked=this.onSeeked.bind(this),this.onError=this.onError.bind(this),this.onEnded=this.onEnded.bind(this),this.onWaiting=this.onWaiting.bind(this),this.player.addEventListener("loadstart",this.onDownload),this.player.addEventListener("loadedmetadata",this.onDownload),this.player.addEventListener("loadeddata",this.onDownload),this.player.addEventListener("adsready",this.onAdsready),this.player.addEventListener("adstart",this.onAdStart),this.player.addEventListener("adend",this.onAdEnd),this.player.addEventListener("canplay",this.onDownload),this.player.addEventListener("play",this.onPlay),this.player.addEventListener("playing",this.onPlaying),this.player.addEventListener("pause",this.onPause),this.player.addEventListener("seeking",this.onSeeking),this.player.addEventListener("seeked",this.onSeeked),this.player.addEventListener("error",this.onError),this.player.addEventListener("ended",this.onEnded),this.player.addEventListener("waiting",this.onWaiting)}unregisterListeners(){this.player.removeEventListener("loadstart",this.onDownload),this.player.removeEventListener("loadedmetadata",this.onDownload),this.player.removeEventListener("loadeddata",this.onDownload),this.player.removeEventListener("adsready",this.onAdsready),this.player.removeEventListener("adstart",this.onAdStart),this.player.removeEventListener("adend",this.onAdEnd),this.player.removeEventListener("canplay",this.onDownload),this.player.removeEventListener("play",this.onPlay),this.player.removeEventListener("playing",this.onPlaying),this.player.removeEventListener("pause",this.onPause),this.player.removeEventListener("seeking",this.onSeeking),this.player.removeEventListener("seeked",this.onSeeked),this.player.removeEventListener("error",this.onError),this.player.removeEventListener("ended",this.onEnded),this.player.removeEventListener("waiting",this.onWaiting)}onDownload(e){this.sendDownload({state:e.type})}onPlay(){this.sendRequest()}onPlaying(){this.sendBufferEnd(),this.sendResume(),this.sendStart()}onPause(){this.sendPause()}onSeeking(){this.sendSeekStart()}onSeeked(){this.sendSeekEnd()}onError(e){const t=e.code,r=e.message;t||r?this.sendError({errorCode:t,errorMessage:r}):this.sendError({error:e})}onEnded(){this.sendEnd()}onWaiting(){this.player.networkState===this.player.NETWORK_LOADING&&this.player.readyState<this.player.HAVE_FUTURE_DATA&&this.sendBufferStart()}}t.default=o},330:e=>{e.exports=JSON.parse('{"name":"@newrelic/video-html5","version":"4.1.0","description":"New relic tracker for HTML5 players","main":"dist/cjs/index.js","module":"dist/esm/index.js","scripts":{"build":"webpack --mode production ","build:dev":"webpack --mode development ","watch":"webpack -p --progress --color --watch --mode production","watch:dev":"webpack --progress --color --watch --mode development","prezip":"npm run build","zip":"zip -P newrelic -x \'*.DS_Store\' -r html5.zip dist samples README.md CHANGELOG.md EULA.md","clean":"rm -rf dist *.zip","deploy":"node scripts/deploy.js","third-party-updates":"oss third-party manifest --includeOptDeps && oss third-party notices --includeOptDeps && git add THIRD_PARTY_NOTICES.md third_party_manifest.json"},"repository":{"type":"git","url":"https://github.com/newrelic/video-html5-js.git"},"author":"Jordi Aguilar","license":"Apache-2.0","dependencies":{"@babel/plugin-transform-nullish-coalescing-operator":"^7.24.7","@babel/plugin-transform-optional-chaining":"^7.24.8","@newrelic/video-core":"/Users/cmalay/Desktop/npm/video-html5-js/newrelic-video-core-4.0.1.tgz","core-js":"^3.0.0"},"devDependencies":{"@babel/core":"^7.24.5","@babel/plugin-proposal-class-properties":"^7.18.6","@babel/plugin-transform-async-to-generator":"^7.27.1","@babel/plugin-transform-class-properties":"^7.27.1","@babel/plugin-transform-destructuring":"^7.28.5","@babel/plugin-transform-for-of":"^7.27.1","@babel/plugin-transform-modules-commonjs":"^7.24.1","@babel/plugin-transform-object-rest-spread":"^7.28.4","@babel/plugin-transform-object-super":"^7.27.1","@babel/plugin-transform-parameters":"^7.27.7","@babel/preset-env":"^7.24.5","@newrelic/newrelic-oss-cli":"^0.1.2","aws-sdk":"^2.920.0","babel-loader":"^9.1.3","webpack":"^5.91.0","webpack-cli":"^4.9.2"},"files":["THIRD_PARTY_NOTICES.md","dist","src","CHANGELOG.md","README.md","!test","LICENSE"],"publishConfig":{"access":"public"}}')},555:(e,t,r)=>{r.r(t),r.d(t,{__esModule:()=>o,default:()=>a});var n={34:(e,t,r)=>{var n=r(4901);e.exports=function(e){return"object"==typeof e?null!==e:n(e)}},81:(e,t,r)=>{var n=r(9565),i=r(9306),s=r(8551),a=r(6823),o=r(851),u=TypeError;e.exports=function(e,t){var r=arguments.length<2?o(e):t;if(i(r))return s(n(r,e));throw new u(a(e)+" is not iterable")}},235:(e,t,r)=>{var n=r(9213).forEach,i=r(4598)("forEach");e.exports=i?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},237:(e,t,r)=>{r(6469)("flatMap")},259:(e,t,r)=>{var n=r(4376),i=r(6198),s=r(6837),a=r(6080),o=function(e,t,r,u,c,l,d,h){for(var f,p,v=c,g=0,y=!!d&&a(d,h);g<u;)g in r&&(f=y?y(r[g],g,t):r[g],l>0&&n(f)?(p=i(f),v=o(e,t,f,p,v,l-1)-1):(s(v+1),e[v]=f),v++),g++;return v};e.exports=o},280:(e,t,r)=>{var n=r(6518),i=r(7751),s=r(6395),a=r(550),o=r(916).CONSTRUCTOR,u=r(3438),c=i("Promise"),l=s&&!o;n({target:"Promise",stat:!0,forced:s||o},{resolve:function(e){return u(l&&this===c?a:this,e)}})},283:(e,t,r)=>{var n=r(9504),i=r(9039),s=r(4901),a=r(9297),o=r(3724),u=r(350).CONFIGURABLE,c=r(3706),l=r(1181),d=l.enforce,h=l.get,f=String,p=Object.defineProperty,v=n("".slice),g=n("".replace),y=n([].join),m=o&&!i(function(){return 8!==p(function(){},"length",{value:8}).length}),E=String(String).split("String"),b=e.exports=function(e,t,r){"Symbol("===v(f(t),0,7)&&(t="["+g(f(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!a(e,"name")||u&&e.name!==t)&&(o?p(e,"name",{value:t,configurable:!0}):e.name=t),m&&r&&a(r,"arity")&&e.length!==r.arity&&p(e,"length",{value:r.arity});try{r&&a(r,"constructor")&&r.constructor?o&&p(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var n=d(e);return a(n,"source")||(n.source=y(E,"string"==typeof t?t:"")),e};Function.prototype.toString=b(function(){return s(this)&&h(this).source||c(this)},"toString")},350:(e,t,r)=>{var n=r(3724),i=r(9297),s=Function.prototype,a=n&&Object.getOwnPropertyDescriptor,o=i(s,"name"),u=o&&"something"===function(){}.name,c=o&&(!n||n&&a(s,"name").configurable);e.exports={EXISTS:o,PROPER:u,CONFIGURABLE:c}},373:(e,t,r)=>{var n=r(4576),i=r(7476),s=r(9039),a=r(9306),o=r(4488),u=r(4644),c=r(3709),l=r(3763),d=r(9519),h=r(3607),f=u.aTypedArray,p=u.exportTypedArrayMethod,v=n.Uint16Array,g=v&&i(v.prototype.sort),y=!(!g||s(function(){g(new v(2),null)})&&s(function(){g(new v(2),{})})),m=!!g&&!s(function(){if(d)return d<74;if(c)return c<67;if(l)return!0;if(h)return h<602;var e,t,r=new v(516),n=Array(516);for(e=0;e<516;e++)t=e%4,r[e]=515-e,n[e]=e-2*t+3;for(g(r,function(e,t){return(e/4|0)-(t/4|0)}),e=0;e<516;e++)if(r[e]!==n[e])return!0});p("sort",function(e){return void 0!==e&&a(e),m?g(this,e):o(f(this),function(e){return function(t,r){return void 0!==e?+e(t,r)||0:r!=r?-1:t!=t?1:0===t&&0===r?1/t>0&&1/r<0?1:-1:t>r}}(e))},!m||y)},397:(e,t,r)=>{var n=r(7751);e.exports=n("document","documentElement")},421:e=>{e.exports={}},436:(e,t,r)=>{var n,i,s,a,o=r(6518),u=r(6395),c=r(6193),l=r(4576),d=r(9167),h=r(9565),f=r(6840),p=r(2967),v=r(687),g=r(7633),y=r(9306),m=r(4901),E=r(34),b=r(679),A=r(2293),S=r(9225).set,T=r(1955),w=r(3138),O=r(1103),R=r(8265),_=r(1181),P=r(550),D=r(916),x=r(6043),I="Promise",L=D.CONSTRUCTOR,N=D.REJECTION_EVENT,C=D.SUBCLASSING,k=_.getterFor(I),j=_.set,B=P&&P.prototype,M=P,H=B,V=l.TypeError,U=l.document,F=l.process,z=x.f,Q=z,W=!!(U&&U.createEvent&&l.dispatchEvent),q="unhandledrejection",G=function(e){var t;return!(!E(e)||!m(t=e.then))&&t},K=function(e,t){var r,n,i,s=t.value,a=1===t.state,o=a?e.ok:e.fail,u=e.resolve,c=e.reject,l=e.domain;try{o?(a||(2===t.rejection&&Z(t),t.rejection=1),!0===o?r=s:(l&&l.enter(),r=o(s),l&&(l.exit(),i=!0)),r===e.promise?c(new V("Promise-chain cycle")):(n=G(r))?h(n,r,u,c):u(r)):c(s)}catch(e){l&&!i&&l.exit(),c(e)}},Y=function(e,t){e.notified||(e.notified=!0,T(function(){for(var r,n=e.reactions;r=n.get();)K(r,e);e.notified=!1,t&&!e.rejection&&X(e)}))},$=function(e,t,r){var n,i;W?((n=U.createEvent("Event")).promise=t,n.reason=r,n.initEvent(e,!1,!0),l.dispatchEvent(n)):n={promise:t,reason:r},!N&&(i=l["on"+e])?i(n):e===q&&w("Unhandled promise rejection",r)},X=function(e){h(S,l,function(){var t,r=e.facade,n=e.value;if(J(e)&&(t=O(function(){c?F.emit("unhandledRejection",n,r):$(q,r,n)}),e.rejection=c||J(e)?2:1,t.error))throw t.value})},J=function(e){return 1!==e.rejection&&!e.parent},Z=function(e){h(S,l,function(){var t=e.facade;c?F.emit("rejectionHandled",t):$("rejectionhandled",t,e.value)})},ee=function(e,t,r){return function(n){e(t,n,r)}},te=function(e,t,r){e.done||(e.done=!0,r&&(e=r),e.value=t,e.state=2,Y(e,!0))},re=function(e,t,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===t)throw new V("Promise can't be resolved itself");var n=G(t);n?T(function(){var r={done:!1};try{h(n,t,ee(re,r,e),ee(te,r,e))}catch(t){te(r,t,e)}}):(e.value=t,e.state=1,Y(e,!1))}catch(t){te({done:!1},t,e)}}};if(L&&(H=(M=function(e){b(this,H),y(e),h(n,this);var t=k(this);try{e(ee(re,t),ee(te,t))}catch(e){te(t,e)}}).prototype,(n=function(e){j(this,{type:I,done:!1,notified:!1,parent:!1,reactions:new R,rejection:!1,state:0,value:null})}).prototype=f(H,"then",function(e,t){var r=k(this),n=z(A(this,M));return r.parent=!0,n.ok=!m(e)||e,n.fail=m(t)&&t,n.domain=c?F.domain:void 0,0===r.state?r.reactions.add(n):T(function(){K(n,r)}),n.promise}),i=function(){var e=new n,t=k(e);this.promise=e,this.resolve=ee(re,t),this.reject=ee(te,t)},x.f=z=function(e){return e===M||e===s?new i(e):Q(e)},!u&&m(P)&&B!==Object.prototype)){a=B.then,C||f(B,"then",function(e,t){var r=this;return new M(function(e,t){h(a,r,e,t)}).then(e,t)},{unsafe:!0});try{delete B.constructor}catch(e){}p&&p(B,H)}o({global:!0,constructor:!0,wrap:!0,forced:L},{Promise:M}),s=d.Promise,v(M,I,!1,!0),g(I)},537:(e,t,r)=>{var n=r(550),i=r(4428),s=r(916).CONSTRUCTOR;e.exports=s||!i(function(e){n.all(e).then(void 0,function(){})})},550:(e,t,r)=>{var n=r(4576);e.exports=n.Promise},616:(e,t,r)=>{var n=r(9039);e.exports=!n(function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})},655:(e,t,r)=>{var n=r(6955),i=String;e.exports=function(e){if("Symbol"===n(e))throw new TypeError("Cannot convert a Symbol value to a string");return i(e)}},659:(e,t,r)=>{r(1278),r(3500),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.setVideoConfig=function(e){return d.setConfiguration(e)},t.videoConfiguration=void 0,r(8350),r(237),r(6034);var n=s(r(6144)),i=s(r(1051));function s(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach(function(t){u(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function u(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const c=i.default.COLLECTOR;class l{setConfiguration(e){return this.initializeGlobalConfig(e),n.default.notice("Video analytics configuration initialized successfully"),!0}validateRequiredFields(e){if(!e||"object"!=typeof e)return n.default.error("Configuration must be an object"),!1;const t=e.licenseKey,r=e.appName,i=e.region,s=e.applicationID,a=e.beacon;if(!t)return n.default.error("licenseKey is required"),!1;if(s){if(!a)return n.default.error("beacon is required when applicationID is provided"),!1;if(!Object.values(c).flatMap(e=>e).includes(a))return n.default.error(`Invalid beacon: ${a}`),!1}else{if(!r||!i)return n.default.error("appName and region are required when applicationID is not provided"),!1;if(!c[i])return n.default.error(`Invalid region: ${i}. Valid regions are: ${Object.keys(c).join(", ")}`),!1}return!0}initializeGlobalConfig(e){if(!this.validateRequiredFields(e))return;let t=e.licenseKey,r=e.appName,n=e.region,s=e.beacon,a=e.applicationID;s="US"===n?i.default.COLLECTOR.US[0]:s||c[n],window.NRVIDEO={info:o(o({},n?{region:n}:{}),{},{beacon:s,licenseKey:t,applicationID:a},a?{}:{appName:r})}}}const d=t.videoConfiguration=new l;t.default=l},679:(e,t,r)=>{var n=r(1625),i=TypeError;e.exports=function(e,t){if(n(t,e))return e;throw new i("Incorrect invocation")}},687:(e,t,r)=>{var n=r(4913).f,i=r(9297),s=r(8227)("toStringTag");e.exports=function(e,t,r){e&&!r&&(e=e.prototype),e&&!i(e,s)&&n(e,s,{configurable:!0,value:t})}},741:e=>{var t=Math.ceil,r=Math.floor;e.exports=Math.trunc||function(e){var n=+e;return(n>0?r:t)(n)}},757:(e,t,r)=>{var n=r(7751),i=r(4901),s=r(1625),a=r(7040),o=Object;e.exports=a?function(e){return"symbol"==typeof e}:function(e){var t=n("Symbol");return i(t)&&s(t.prototype,o(e))}},851:(e,t,r)=>{var n=r(6955),i=r(5966),s=r(4117),a=r(6269),o=r(8227)("iterator");e.exports=function(e){if(!s(e))return i(e,o)||i(e,"@@iterator")||a[n(e)]}},916:(e,t,r)=>{var n=r(4576),i=r(550),s=r(4901),a=r(2796),o=r(3706),u=r(8227),c=r(4215),l=r(6395),d=r(9519),h=i&&i.prototype,f=u("species"),p=!1,v=s(n.PromiseRejectionEvent),g=a("Promise",function(){var e=o(i),t=e!==String(i);if(!t&&66===d)return!0;if(l&&(!h.catch||!h.finally))return!0;if(!d||d<51||!/native code/.test(e)){var r=new i(function(e){e(1)}),n=function(e){e(function(){},function(){})};if((r.constructor={})[f]=n,!(p=r.then(function(){})instanceof n))return!0}return!(t||"BROWSER"!==c&&"DENO"!==c||v)});e.exports={CONSTRUCTOR:g,REJECTION_EVENT:v,SUBCLASSING:p}},1028:(e,t,r)=>{r(1278),r(3500),Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.OptimizedHttpClient=void 0,r(3362);var n,i=r(2347),s=(n=r(6144))&&n.__esModule?n:{default:n};function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach(function(t){u(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function u(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t,r,n,i,s,a){try{var o=e[s](a),u=o.value}catch(e){return void r(e)}o.done?t(u):Promise.resolve(u).then(n,i)}function l(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var s=e.apply(t,r);function a(e){c(s,n,i,a,o,"next",e)}function o(e){c(s,n,i,a,o,"throw",e)}a(void 0)})}}class d{send(e,t){var r=this;return l(function*(){const n=e.url,i=e.payload,a=e.options,o=void 0===a?{}:a;console.log("payload",i);try{if(!n||!i)throw new Error("URL and payload are required");const e={url:n,payload:i,options:o,callback:t};yield r.executeRequest(e)}catch(e){s.default.error("Failed to send request:",e.message),t({retry:!1,status:0,error:e.message})}})()}executeRequest(e){var t=this;return l(function*(){const r=e.url,n=e.payload,i=e.options,s=(e.callback,Date.now());try{const a=JSON.stringify(n.body);if(i.isFinalHarvest&&navigator.sendBeacon){const n=yield t.sendWithBeacon(r,a),i={success:n,status:n?204:0};return void t.handleRequestComplete(e,i,s)}const o=yield t.fetchWithTimeout(r,{method:"POST",body:a,headers:{"Content-Type":"application/json"},keepalive:i.isFinalHarvest},1e4),u={success:o.ok,status:o.status,statusText:o.statusText};t.handleRequestComplete(e,u,s)}catch(r){const n={success:!1,status:0,error:r.message};t.handleRequestComplete(e,n,s)}})()}handleRequestComplete(e,t){(0,e.callback)({retry:!t.success&&(0===t.status||(0,i.shouldRetry)(t.status)),status:t.status,error:t.error})}sendWithBeacon(e,t){return l(function*(){try{return navigator.sendBeacon(e,t)}catch(e){return s.default.warn("sendBeacon failed, falling back to fetch:",e.message),!1}})()}fetchWithTimeout(e,t,r){return l(function*(){const n=new AbortController,i=setTimeout(()=>n.abort(),r);try{const r=yield fetch(e,o(o({},t),{},{signal:n.signal}));return clearTimeout(i),r}catch(e){if(clearTimeout(i),"AbortError"===e.name)throw new Error(`Request timeout after ${r}ms`);throw e}})()}}t.OptimizedHttpClient=d,t.default=d},1051:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;class r{}r.AdPositions={PRE:"pre",MID:"mid",POST:"post"},r.COLLECTOR={US:["bam.nr-data.net","bam-cell.nr-data.net"],EU:"bam.eu01.nr-data.net",Staging:"staging-bam-cell.nr-data.net",GOV:"gov-bam.nr-data.net"},r.VALID_EVENT_TYPES=["VideoAction","VideoAdAction","VideoErrorAction","VideoCustomAction"],r.MAX_PAYLOAD_SIZE=1048576,r.MAX_BEACON_SIZE=61440,r.MAX_EVENTS_PER_BATCH=1e3,r.INTERVAL=1e4,t.default=r},1072:(e,t,r)=>{var n=r(1828),i=r(8727);e.exports=Object.keys||function(e){return n(e,i)}},1088:(e,t,r)=>{var n=r(6518),i=r(9565),s=r(6395),a=r(350),o=r(4901),u=r(3994),c=r(2787),l=r(2967),d=r(687),h=r(6699),f=r(6840),p=r(8227),v=r(6269),g=r(7657),y=a.PROPER,m=a.CONFIGURABLE,E=g.IteratorPrototype,b=g.BUGGY_SAFARI_ITERATORS,A=p("iterator"),S="keys",T="values",w="entries",O=function(){return this};e.exports=function(e,t,r,a,p,g,R){u(r,t,a);var _,P,D,x=function(e){if(e===p&&k)return k;if(!b&&e&&e in N)return N[e];switch(e){case S:case T:case w:return function(){return new r(this,e)}}return function(){return new r(this)}},I=t+" Iterator",L=!1,N=e.prototype,C=N[A]||N["@@iterator"]||p&&N[p],k=!b&&C||x(p),j="Array"===t&&N.entries||C;if(j&&(_=c(j.call(new e)))!==Object.prototype&&_.next&&(s||c(_)===E||(l?l(_,E):o(_[A])||f(_,A,O)),d(_,I,!0,!0),s&&(v[I]=O)),y&&p===T&&C&&C.name!==T&&(!s&&m?h(N,"name",T):(L=!0,k=function(){return i(C,this)})),p)if(P={values:x(T),keys:g?k:x(S),entries:x(w)},R)for(D in P)(b||L||!(D in N))&&f(N,D,P[D]);else n({target:t,proto:!0,forced:b||L},P);return s&&!R||N[A]===k||f(N,A,k,{name:p}),v[t]=k,P}},1103:e=>{e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},1108:(e,t,r)=>{var n=r(6955);e.exports=function(e){var t=n(e);return"BigInt64Array"===t||"BigUint64Array"===t}},1181:(e,t,r)=>{var n,i,s,a=r(8622),o=r(4576),u=r(34),c=r(6699),l=r(9297),d=r(7629),h=r(6119),f=r(421),p="Object already initialized",v=o.TypeError,g=o.WeakMap;if(a||d.state){var y=d.state||(d.state=new g);y.get=y.get,y.has=y.has,y.set=y.set,n=function(e,t){if(y.has(e))throw new v(p);return t.facade=e,y.set(e,t),t},i=function(e){return y.get(e)||{}},s=function(e){return y.has(e)}}else{var m=h("state");f[m]=!0,n=function(e,t){if(l(e,m))throw new v(p);return t.facade=e,c(e,m,t),t},i=function(e){return l(e,m)?e[m]:{}},s=function(e){return l(e,m)}}e.exports={set:n,get:i,has:s,enforce:function(e){return s(e)?i(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!u(t)||(r=i(t)).type!==e)throw new v("Incompatible receiver, "+e+" required");return r}}}},1278:(e,t,r)=>{var n=r(6518),i=r(3724),s=r(5031),a=r(5397),o=r(7347),u=r(4659);n({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(e){for(var t,r,n=a(e),i=o.f,c=s(n),l={},d=0;c.length>d;)void 0!==(r=i(n,t=c[d++]))&&u(l,t,r);return l}})},1291:(e,t,r)=>{var n=r(741);e.exports=function(e){var t=+e;return t!=t||0===t?0:n(t)}},1449:(e,t,r)=>{r(1278),r(3500),Object.defineProperty(t,"__esModule",{value:!0}),t.recordEvent=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var r;if(!i.default.VALID_EVENT_TYPES.includes(e))return s.default.warn("Invalid event type provided to recordEvent",{eventType:e}),!1;if(null===(r=window)||void 0===r||null===(r=r.NRVIDEO)||void 0===r||!r.info)return;const a=window.NRVIDEO.info,o=a.appName,c=a.applicationID,l=u(u(u({},t),{},{eventType:e},c?{}:{appName:o}),{},{timestamp:Date.now(),timeSinceLoad:window.performance?window.performance.now()/1e3:null});return n.videoAnalyticsHarvester.addEvent(l)}catch(e){return s.default.error("Failed to record event:",e.message),!1}};var n=r(1487),i=a(r(1051)),s=a(r(6144));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){c(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function c(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},1469:(e,t,r)=>{var n=r(7433);e.exports=function(e,t){return new(n(e))(0===t?0:t)}},1481:(e,t,r)=>{var n=r(6518),i=r(6043);n({target:"Promise",stat:!0,forced:r(916).CONSTRUCTOR},{reject:function(e){var t=i.f(this);return(0,t.reject)(e),t.promise}})},1487:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.videoAnalyticsHarvester=void 0;var n,i=r(4374),s=r(2431),a=(n=r(6144))&&n.__esModule?n:{default:n};const o=new class{constructor(){this.isInitialized=!1,this.harvestScheduler=null,this.eventBuffer=null}initialize(){if(this.isInitialized)a.default.warn("Video analytics agent already initialized");else try{this.eventBuffer=new s.NrVideoEventAggregator,this.harvestScheduler=new i.HarvestScheduler(this.eventBuffer),this.harvestScheduler.startScheduler(),this.isInitialized=!0,a.default.notice("Video analytics agent initialized successfully")}catch(e){a.default.error("Failed to initialize video analytics agent:",e.message)}}addEvent(e){this.isInitialized||(a.default.warn("Video analytics agent not initialized, initializing now"),this.initialize());try{return this.eventBuffer.add(e)}catch(e){return a.default.error("Failed to add event to harvesting system:",e.message),!1}}setHarvestInterval(e){this.isInitialized||this.initialize(),this.harvestScheduler.updateHarvestInterval(e)}};t.videoAnalyticsHarvester=o},1489:(e,t,r)=>{r(5823)("Uint8",function(e){return function(t,r,n){return e(this,t,r,n)}})},1568:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(3500),t.default=class{on(e,t){if(this._listeners=this._listeners||{},"function"==typeof t)return this._listeners[e]=this._listeners[e]||[],this._listeners[e].push(t),this}off(e,t){if(this._listeners=this._listeners||{},this._listeners[e]){var r=this._listeners[e].indexOf(t);-1!==r&&this._listeners[e].splice(r,1)}return this}emit(e,t,r){return console.log(e,t,r),this._listeners=this._listeners||{},r=r||{},Array.isArray(this._listeners[t])&&this._listeners[t].forEach(n=>{n.call(this,{eventType:e,type:t,data:r,target:this})}),Array.isArray(this._listeners["*"])&&this._listeners["*"].forEach(n=>{n.call(this,{eventType:e,type:t,data:r,target:this})}),this}}},1625:(e,t,r)=>{var n=r(9504);e.exports=n({}.isPrototypeOf)},1828:(e,t,r)=>{var n=r(9504),i=r(9297),s=r(5397),a=r(9617).indexOf,o=r(421),u=n([].push);e.exports=function(e,t){var r,n=s(e),c=0,l=[];for(r in n)!i(o,r)&&i(n,r)&&u(l,r);for(;t.length>c;)i(n,r=t[c++])&&(~a(l,r)||u(l,r));return l}},1955:(e,t,r)=>{var n,i,s,a,o,u=r(4576),c=r(3389),l=r(6080),d=r(9225).set,h=r(8265),f=r(9544),p=r(4265),v=r(7860),g=r(6193),y=u.MutationObserver||u.WebKitMutationObserver,m=u.document,E=u.process,b=u.Promise,A=c("queueMicrotask");if(!A){var S=new h,T=function(){var e,t;for(g&&(e=E.domain)&&e.exit();t=S.get();)try{t()}catch(e){throw S.head&&n(),e}e&&e.enter()};f||g||v||!y||!m?!p&&b&&b.resolve?((a=b.resolve(void 0)).constructor=b,o=l(a.then,a),n=function(){o(T)}):g?n=function(){E.nextTick(T)}:(d=l(d,u),n=function(){d(T)}):(i=!0,s=m.createTextNode(""),new y(T).observe(s,{characterData:!0}),n=function(){s.data=i=!i}),A=function(e){S.head||n(),S.add(e)}}e.exports=A},2003:(e,t,r)=>{var n=r(6518),i=r(6395),s=r(916).CONSTRUCTOR,a=r(550),o=r(7751),u=r(4901),c=r(6840),l=a&&a.prototype;if(n({target:"Promise",proto:!0,forced:s,real:!0},{catch:function(e){return this.then(void 0,e)}}),!i&&u(a)){var d=o("Promise").prototype.catch;l.catch!==d&&c(l,"catch",d,{unsafe:!0})}},2087:(e,t,r)=>{var n=r(34),i=Math.floor;e.exports=Number.isInteger||function(e){return!n(e)&&isFinite(e)&&i(e)===e}},2106:(e,t,r)=>{var n=r(283),i=r(4913);e.exports=function(e,t,r){return r.get&&n(r.get,t,{getter:!0}),r.set&&n(r.set,t,{setter:!0}),i.f(e,t,r)}},2140:(e,t,r)=>{var n={};n[r(8227)("toStringTag")]="z",e.exports="[object z]"===String(n)},2195:(e,t,r)=>{var n=r(9504),i=n({}.toString),s=n("".slice);e.exports=function(e){return s(i(e),8,-1)}},2211:(e,t,r)=>{var n=r(9039);e.exports=!n(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})},2293:(e,t,r)=>{var n=r(8551),i=r(5548),s=r(4117),a=r(8227)("species");e.exports=function(e,t){var r,o=n(e).constructor;return void 0===o||s(r=n(o)[a])?t:i(r)}},2347:(e,t,r)=>{r(3362),Object.defineProperty(t,"__esModule",{value:!0}),t.buildUrl=function(e){try{if(!window.NRVIDEO||!window.NRVIDEO.info)throw new Error("NRVIDEO info is not available.");let t=window.NRVIDEO.info,r=t.beacon,i=t.licenseKey,s=t.applicationID;if(!r||!i)throw new Error("Options object provided by New Relic is not correctly initialized");return s?`https://${e||r}/ins/1/${i}?a=${s}&v=${n.default.version}&ref=${window.location.href}&ca=VA`:`https://${e||r}/ins/1/${i}?&v=${n.default.version}&ref=${window.location.href}&ca=VA`}catch(e){return console.error(e.message),null}},t.compressPayload=function(e){const t=JSON.stringify(e),r=new Blob([t]).stream(),n=new CompressionStream("gzip"),i=r.pipeThrough(n);return new Response(i).blob()},t.dataSize=function(e){if("string"==typeof e&&e.length)return e.length;if("object"==typeof e){if("undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer&&e.byteLength)return e.byteLength;if("undefined"!=typeof Blob&&e instanceof Blob&&e.size)return e.size;if(!("undefined"!=typeof FormData&&e instanceof FormData))try{return function(e){try{var t;return null!==(t=JSON.stringify(e,o()))&&void 0!==t?t:""}catch(e){return i.default.error("Error stringifying value:",e.message),""}}(e).length}catch(e){return}}},t.decompressPayload=function(e){return u.apply(this,arguments)},t.shouldRetry=function(e){switch(e){case 408:case 429:case 500:return!0;case 401:case 403:case 404:return!1}return e>=502&&e<=504||e>=512&&e<=530},r(3792),r(1489),r(5044),r(8845),r(373),r(2953);var n=s(r(8330)),i=s(r(6144));function s(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r,n,i,s,a){try{var o=e[s](a),u=o.value}catch(e){return void r(e)}o.done?t(u):Promise.resolve(u).then(n,i)}const o=()=>{const e=new WeakSet;return(t,r)=>{if("object"==typeof r&&null!==r){if(e.has(r))return;e.add(r)}return r}};function u(){var e;return e=function*(e){try{let t;if(e instanceof Blob)t=e.stream();else if(e instanceof ArrayBuffer)t=new Blob([e]).stream();else{if(!(e instanceof Uint8Array))throw new Error("Unsupported compressed data type");t=new Blob([e]).stream()}const r=new DecompressionStream("gzip"),n=t.pipeThrough(r),i=new Response(n),s=yield i.text();return JSON.parse(s)}catch(e){throw new Error(`Failed to decompress payload: ${e.message}`)}},u=function(){var t=this,r=arguments;return new Promise(function(n,i){var s=e.apply(t,r);function o(e){a(s,n,i,o,u,"next",e)}function u(e){a(s,n,i,o,u,"throw",e)}o(void 0)})},u.apply(this,arguments)}},2357:(e,t,r)=>{var n=r(3724),i=r(9039),s=r(9504),a=r(2787),o=r(1072),u=r(5397),c=s(r(8773).f),l=s([].push),d=n&&i(function(){var e=Object.create(null);return e[2]=2,!c(e,2)}),h=function(e){return function(t){for(var r,i=u(t),s=o(i),h=d&&null===a(i),f=s.length,p=0,v=[];f>p;)r=s[p++],n&&!(h?r in i:c(i,r))||l(v,e?[r,i[r]]:i[r]);return v}};e.exports={entries:h(!0),values:h(!1)}},2360:(e,t,r)=>{var n,i=r(8551),s=r(6801),a=r(8727),o=r(421),u=r(397),c=r(4055),l=r(6119),d="prototype",h="script",f=l("IE_PROTO"),p=function(){},v=function(e){return"<"+h+">"+e+"</"+h+">"},g=function(e){e.write(v("")),e.close();var t=e.parentWindow.Object;return e=null,t},y=function(){try{n=new ActiveXObject("htmlfile")}catch(e){}var e,t,r;y="undefined"!=typeof document?document.domain&&n?g(n):(t=c("iframe"),r="java"+h+":",t.style.display="none",u.appendChild(t),t.src=String(r),(e=t.contentWindow.document).open(),e.write(v("document.F=Object")),e.close(),e.F):g(n);for(var i=a.length;i--;)delete y[d][a[i]];return y()};o[f]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(p[d]=i(e),r=new p,p[d]=null,r[f]=e):r=y(),void 0===t?r:s.f(r,t)}},2431:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.NrVideoEventAggregator=void 0;var n=a(r(6144)),i=a(r(1051)),s=r(2347);function a(e){return e&&e.__esModule?e:{default:e}}const o=i.default.MAX_PAYLOAD_SIZE,u=i.default.MAX_EVENTS_PER_BATCH;class c{constructor(){this.buffer=[],this.maxPayloadSize=o,this.maxEventsPerBatch=u,this.currentPayloadSize=0,this.totalEvents=0,this.smartHarvestPayloadThreshold=Math.floor(.6*this.maxPayloadSize),this.overflowPayloadThreshold=Math.floor(.9*this.maxPayloadSize),this.smartHarvestEventThreshold=Math.floor(.6*this.maxEventsPerBatch),this.overflowEventThreshold=Math.floor(.9*this.maxEventsPerBatch),this.onSmartHarvestTrigger=null}add(e){try{const t=(0,s.dataSize)(e),r=this.currentPayloadSize+t>=this.maxPayloadSize,n=this.totalEvents+1>=this.maxEventsPerBatch;return(r||n)&&this.makeRoom(t),this.buffer.push(e),this.totalEvents++,this.currentPayloadSize+=t,this.checkSmartHarvestTrigger(),!0}catch(e){return n.default.error("Failed to add event to buffer:",e.message),!1}}checkSmartHarvestTrigger(){const e=this.currentPayloadSize/this.maxPayloadSize,t=this.totalEvents/this.maxEventsPerBatch,r=this.currentPayloadSize>=this.overflowPayloadThreshold,i=this.totalEvents>=this.overflowEventThreshold;if(r||i){const i=r?`payload ${this.currentPayloadSize}/${this.maxPayloadSize} bytes (${Math.round(100*e)}%)`:`events ${this.totalEvents}/${this.maxEventsPerBatch} (${Math.round(100*t)}%)`;n.default.warn(`OVERFLOW PREVENTION: ${i} - Emergency harvest triggered`),this.onSmartHarvestTrigger&&"function"==typeof this.onSmartHarvestTrigger&&this.onSmartHarvestTrigger("overflow",90)}else{const e=this.currentPayloadSize>=this.smartHarvestPayloadThreshold,t=this.totalEvents>=this.smartHarvestEventThreshold;(e||t)&&this.onSmartHarvestTrigger&&"function"==typeof this.onSmartHarvestTrigger&&this.onSmartHarvestTrigger("smart",60)}}setSmartHarvestCallback(e){this.onSmartHarvestTrigger=e}drain(){try{const e=this.buffer.splice(0);return this.totalEvents=0,this.currentPayloadSize=0,e}catch(e){return n.default.error("Failed to drain events from buffer:",e.message),[]}}isEmpty(){return 0===this.totalEvents}size(){return this.totalEvents}clear(){this.buffer=[],this.totalEvents=0}makeRoom(e){if(e>this.maxPayloadSize)n.default.error("Event dropped: Event size exceeds maximum payload size.");else for(;(this.totalEvents>=this.maxEventsPerBatch||this.currentPayloadSize+e>=this.maxPayloadSize)&&this.buffer.length>0;){const e=this.buffer.shift(),t=(0,s.dataSize)(e);this.totalEvents--,this.currentPayloadSize-=t,n.default.warn("Event buffer full, oldest event removed.")}}}t.NrVideoEventAggregator=c,t.default=c},2529:e=>{e.exports=function(e,t){return{value:e,done:t}}},2652:(e,t,r)=>{var n=r(6080),i=r(9565),s=r(8551),a=r(6823),o=r(4209),u=r(6198),c=r(1625),l=r(81),d=r(851),h=r(9539),f=TypeError,p=function(e,t){this.stopped=e,this.result=t},v=p.prototype;e.exports=function(e,t,r){var g,y,m,E,b,A,S,T=r&&r.that,w=!(!r||!r.AS_ENTRIES),O=!(!r||!r.IS_RECORD),R=!(!r||!r.IS_ITERATOR),_=!(!r||!r.INTERRUPTED),P=n(t,T),D=function(e){return g&&h(g,"normal"),new p(!0,e)},x=function(e){return w?(s(e),_?P(e[0],e[1],D):P(e[0],e[1])):_?P(e,D):P(e)};if(O)g=e.iterator;else if(R)g=e;else{if(!(y=d(e)))throw new f(a(e)+" is not iterable");if(o(y)){for(m=0,E=u(e);E>m;m++)if((b=x(e[m]))&&c(v,b))return b;return new p(!1)}g=l(e,y)}for(A=O?e.next:g.next;!(S=i(A,g)).done;){try{b=x(S.value)}catch(e){h(g,"throw",e)}if("object"==typeof b&&b&&c(v,b))return b}return new p(!1)}},2777:(e,t,r)=>{var n=r(9565),i=r(34),s=r(757),a=r(5966),o=r(4270),u=r(8227),c=TypeError,l=u("toPrimitive");e.exports=function(e,t){if(!i(e)||s(e))return e;var r,u=a(e,l);if(u){if(void 0===t&&(t="default"),r=n(u,e,t),!i(r)||s(r))return r;throw new c("Can't convert object to primitive value")}return void 0===t&&(t="number"),o(e,t)}},2787:(e,t,r)=>{var n=r(9297),i=r(4901),s=r(8981),a=r(6119),o=r(2211),u=a("IE_PROTO"),c=Object,l=c.prototype;e.exports=o?c.getPrototypeOf:function(e){var t=s(e);if(n(t,u))return t[u];var r=t.constructor;return i(r)&&t instanceof r?r.prototype:t instanceof c?l:null}},2796:(e,t,r)=>{var n=r(9039),i=r(4901),s=/#|\.prototype\./,a=function(e,t){var r=u[o(e)];return r===l||r!==c&&(i(t)?n(t):!!t)},o=a.normalize=function(e){return String(e).replace(s,".").toLowerCase()},u=a.data={},c=a.NATIVE="N",l=a.POLYFILL="P";e.exports=a},2805:(e,t,r)=>{var n=r(4576),i=r(9039),s=r(4428),a=r(4644).NATIVE_ARRAY_BUFFER_VIEWS,o=n.ArrayBuffer,u=n.Int8Array;e.exports=!a||!i(function(){u(1)})||!i(function(){new u(-1)})||!s(function(e){new u,new u(null),new u(1.5),new u(e)},!0)||i(function(){return 1!==new u(new o(2),1,void 0).length})},2812:e=>{var t=TypeError;e.exports=function(e,r){if(e<r)throw new t("Not enough arguments");return e}},2839:(e,t,r)=>{var n=r(4576).navigator,i=n&&n.userAgent;e.exports=i?String(i):""},2953:(e,t,r)=>{var n=r(4576),i=r(7400),s=r(9296),a=r(3792),o=r(6699),u=r(687),c=r(8227)("iterator"),l=a.values,d=function(e,t){if(e){if(e[c]!==l)try{o(e,c,l)}catch(t){e[c]=l}if(u(e,t,!0),i[t])for(var r in a)if(e[r]!==a[r])try{o(e,r,a[r])}catch(t){e[r]=a[r]}}};for(var h in i)d(n[h]&&n[h].prototype,h);d(s,"DOMTokenList")},2967:(e,t,r)=>{var n=r(6706),i=r(34),s=r(7750),a=r(3506);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=n(Object.prototype,"__proto__","set"))(r,[]),t=r instanceof Array}catch(e){}return function(r,n){return s(r),a(n),i(r)?(t?e(r,n):r.__proto__=n,r):r}}():void 0)},3138:e=>{e.exports=function(e,t){try{1===arguments.length?console.error(e):console.error(e,t)}catch(e){}}},3164:(e,t,r)=>{var n=r(7782),i=r(3602),s=Math.abs;e.exports=function(e,t,r,a){var o=+e,u=s(o),c=n(o);if(u<a)return c*i(u/a/t)*a*t;var l=(1+t/2220446049250313e-31)*u,d=l-(l-u);return d>r||d!=d?c*(1/0):c*d}},3167:(e,t,r)=>{var n=r(4901),i=r(34),s=r(2967);e.exports=function(e,t,r){var a,o;return s&&n(a=t.constructor)&&a!==r&&i(o=a.prototype)&&o!==r.prototype&&s(e,o),e}},3251:(e,t,r)=>{var n=r(6080),i=r(9565),s=r(5548),a=r(8981),o=r(6198),u=r(81),c=r(851),l=r(4209),d=r(1108),h=r(4644).aTypedArrayConstructor,f=r(5854);e.exports=function(e){var t,r,p,v,g,y,m,E,b=s(this),A=a(e),S=arguments.length,T=S>1?arguments[1]:void 0,w=void 0!==T,O=c(A);if(O&&!l(O))for(E=(m=u(A,O)).next,A=[];!(y=i(E,m)).done;)A.push(y.value);for(w&&S>2&&(T=n(T,arguments[2])),r=o(A),p=new(h(b))(r),v=d(p),t=0;r>t;t++)g=w?T(A[t],t):A[t],p[t]=v?f(g):+g;return p}},3362:(e,t,r)=>{r(436),r(6499),r(2003),r(7743),r(1481),r(280)},3389:(e,t,r)=>{var n=r(4576),i=r(3724),s=Object.getOwnPropertyDescriptor;e.exports=function(e){if(!i)return n[e];var t=s(n,e);return t&&t.value}},3392:(e,t,r)=>{var n=r(9504),i=0,s=Math.random(),a=n(1.1.toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++i+s,36)}},3438:(e,t,r)=>{var n=r(8551),i=r(34),s=r(6043);e.exports=function(e,t){if(n(e),i(t)&&t.constructor===e)return t;var r=s.f(e);return(0,r.resolve)(t),r.promise}},3500:(e,t,r)=>{var n=r(4576),i=r(7400),s=r(9296),a=r(235),o=r(6699),u=function(e){if(e&&e.forEach!==a)try{o(e,"forEach",a)}catch(t){e.forEach=a}};for(var c in i)i[c]&&u(n[c]&&n[c].prototype);u(s)},3506:(e,t,r)=>{var n=r(3925),i=String,s=TypeError;e.exports=function(e){if(n(e))return e;throw new s("Can't set "+i(e)+" as a prototype")}},3517:(e,t,r)=>{var n=r(9504),i=r(9039),s=r(4901),a=r(6955),o=r(7751),u=r(3706),c=function(){},l=o("Reflect","construct"),d=/^\s*(?:class|function)\b/,h=n(d.exec),f=!d.test(c),p=function(e){if(!s(e))return!1;try{return l(c,[],e),!0}catch(e){return!1}},v=function(e){if(!s(e))return!1;switch(a(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f||!!h(d,u(e))}catch(e){return!0}};v.sham=!0,e.exports=!l||i(function(){var e;return p(p.call)||!p(Object)||!p(function(){e=!0})||e})?v:p},3602:e=>{var t=4503599627370496;e.exports=function(e){return e+t-t}},3607:(e,t,r)=>{var n=r(2839).match(/AppleWebKit\/(\d+)\./);e.exports=!!n&&+n[1]},3635:(e,t,r)=>{var n=r(9039),i=r(4576).RegExp;e.exports=n(function(){var e=i(".","s");return!(e.dotAll&&e.test("\n")&&"s"===e.flags)})},3706:(e,t,r)=>{var n=r(9504),i=r(4901),s=r(7629),a=n(Function.toString);i(s.inspectSource)||(s.inspectSource=function(e){return a(e)}),e.exports=s.inspectSource},3709:(e,t,r)=>{var n=r(2839).match(/firefox\/(\d+)/i);e.exports=!!n&&+n[1]},3717:(e,t)=>{t.f=Object.getOwnPropertySymbols},3724:(e,t,r)=>{var n=r(9039);e.exports=!n(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})},3763:(e,t,r)=>{var n=r(2839);e.exports=/MSIE|Trident/.test(n)},3792:(e,t,r)=>{var n=r(5397),i=r(6469),s=r(6269),a=r(1181),o=r(4913).f,u=r(1088),c=r(2529),l=r(6395),d=r(3724),h="Array Iterator",f=a.set,p=a.getterFor(h);e.exports=u(Array,"Array",function(e,t){f(this,{type:h,target:n(e),index:0,kind:t})},function(){var e=p(this),t=e.target,r=e.index++;if(!t||r>=t.length)return e.target=null,c(void 0,!0);switch(e.kind){case"keys":return c(r,!1);case"values":return c(t[r],!1)}return c([r,t[r]],!1)},"values");var v=s.Arguments=s.Array;if(i("keys"),i("values"),i("entries"),!l&&d&&"values"!==v.name)try{o(v,"name",{value:"values"})}catch(e){}},3793:(e,t,r)=>{r(1278),r(3500),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r(6144)),i=o(r(9302)),s=o(r(7328)),a=o(r(8330));function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){l(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function l(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class d extends i.default{constructor(e,t){super(),this.state=new s.default,this.adsTracker=null,this._lastBufferType=null,this._userId=null,t=t||{},this.setOptions(t),e&&this.setPlayer(e,t.tag),n.default.notice("Tracker "+this.getTrackerName()+" v"+this.getTrackerVersion()+" is ready.")}setUserId(e){this._userId=e}setOptions(e){e&&(e.adsTracker&&this.setAdsTracker(e.adsTracker),"boolean"==typeof e.isAd&&this.setIsAd(e.isAd),i.default.prototype.setOptions.apply(this,arguments))}setPlayer(e,t){(this.player||this.tag)&&this.dispose(),"undefined"!=typeof document&&document.getElementById&&("string"==typeof e&&(e=document.getElementById(e)),"string"==typeof t&&(t=document.getElementById(t))),t=t||e,this.player=e,this.tag=t,this.registerListeners()}isAd(){return this.state.isAd()}setIsAd(e){this.state.setIsAd(e)}setAdsTracker(e){this.disposeAdsTracker(),e&&(this.adsTracker=e,this.adsTracker.setIsAd(!0),this.adsTracker.parentTracker=this,this.adsTracker.on("*",h.bind(this)))}disposeAdsTracker(){this.adsTracker&&(this.adsTracker.off("*",h),this.adsTracker.dispose())}dispose(){this.stopHeartbeat(),this.disposeAdsTracker(),this.unregisterListeners(),this.player=null,this.tag=null}registerListeners(){}unregisterListeners(){}getViewId(){return this.parentTracker?this.parentTracker.getViewId():this.state.getViewId()}getViewSession(){return this.parentTracker?this.parentTracker.getViewSession():this.state.getViewSession()}getVideoId(){return null}getTitle(){return null}isLive(){return null}getBitrate(){return null}getWebkitBitrate(){if(this.tag&&this.tag.webkitVideoDecodedByteCount){let e;if(this._lastWebkitBitrate){e=this.tag.webkitVideoDecodedByteCount;let t=e-this._lastWebkitBitrate,r=this.getHeartbeat()/1e3;e=Math.round(t/r*8)}return this._lastWebkitBitrate=this.tag.webkitVideoDecodedByteCount,e||null}}getRenditionName(){return null}getRenditionBitrate(){return null}getRenditionShift(e){let t,r=this.getRenditionBitrate();return this.isAd()?(t=this._lastAdRendition,e&&(this._lastAdRendition=r)):(t=this._lastRendition,e&&(this._lastRendition=r)),r&&t?r>t?"up":r<t?"down":null:null}getRenditionHeight(){return this.tag?this.tag.videoHeight:null}getRenditionWidth(){return this.tag?this.tag.videoWidth:null}getDuration(){return this.tag?this.tag.duration:null}getPlayhead(){return this.tag?this.tag.currentTime:null}getLanguage(){return null}getSrc(){return this.tag?this.tag.currentSrc:null}getPlayrate(){return this.tag?this.tag.playbackRate:null}isMuted(){return this.tag?this.tag.muted:null}isFullscreen(){return null}getCdn(){return null}getPlayerName(){return this.getTrackerName()}getPlayerVersion(){return a.default.version}getFps(){return null}isAutoplayed(){return this.tag?this.tag.autoplay:null}getPreload(){return this.tag?this.tag.preload:null}getAdQuartile(){return null}getAdPosition(){return this.parentTracker?this.parentTracker.state.isStarted?"mid":"pre":null}getAdPartner(){return null}getAdCreativeId(){return null}getInstrumentationProvider(){return null}getInstrumentationName(){return null}getInstrumentationVersion(){return null}getAttributes(e,t){if(void 0===(e=i.default.prototype.getAttributes.apply(this,arguments)).isAd&&(e.isAd=this.isAd()),e.viewSession=this.getViewSession(),e.viewId=this.getViewId(),e.playerName=this.getPlayerName(),e.playerVersion=this.getPlayerVersion(),e["instrumentation.provider"]=this.getInstrumentationProvider(),e["instrumentation.name"]=this.getInstrumentationName(),e["instrumentation.version"]=this.getInstrumentationVersion(),e["enduser.id"]=this._userId,e.src="Browser","customAction"===t)return e;try{e.pageUrl=window.location.href}catch(e){}this.isAd()?(e.adId=this.getVideoId(),e.adTitle=this.getTitle(),e.adSrc=this.getSrc(),e.adCdn=this.getCdn(),e.adBitrate=this.getBitrate()||this.getWebkitBitrate()||this.getRenditionBitrate(),e.adRenditionName=this.getRenditionName(),e.adRenditionBitrate=this.getRenditionBitrate(),e.adRenditionHeight=this.getRenditionHeight(),e.adRenditionWidth=this.getRenditionWidth(),e.adDuration=this.getDuration(),e.adPlayhead=this.getPlayhead(),e.adLanguage=this.getLanguage(),e.adIsMuted=this.isMuted(),e.adFps=this.getFps(),e.adPosition=this.getAdPosition(),e.adCreativeId=this.getAdCreativeId(),e.adPartner=this.getAdPartner()):(e.contentId=this.getVideoId(),e.contentTitle=this.getTitle(),e.contentSrc=this.getSrc(),e.contentCdn=this.getCdn(),e.contentPlayhead=this.getPlayhead(),e.contentIsLive=this.isLive(),e.contentBitrate=this.getBitrate()||this.getWebkitBitrate()||this.getRenditionBitrate(),e.contentRenditionName=this.getRenditionName(),e.contentRenditionBitrate=this.getRenditionBitrate(),e.contentRenditionHeight=this.getRenditionHeight(),e.contentRenditionWidth=this.getRenditionWidth(),e.contentDuration=this.getDuration(),e.contentLanguage=this.getLanguage(),e.contentPlayrate=this.getPlayrate(),e.contentIsFullscreen=this.isFullscreen(),e.contentIsMuted=this.isMuted(),e.contentIsAutoplayed=this.isAutoplayed(),e.contentPreload=this.getPreload(),e.contentFps=this.getFps(),null!=this.adsTracker&&this.adsTracker.state.totalAdPlaytime>0&&(e.totalAdPlaytime=this.adsTracker.state.totalAdPlaytime)),this.state.getStateAttributes(e);for(let t in this.customData)e[t]=this.customData[t];return e}sendCustom(e,t,r){r=r||{},this.sendVideoCustomAction(e,r),this.state.setTimeSinceAttribute(t)}sendPlayerReady(e){this.state.goPlayerReady()&&(e=e||{},this.sendVideoAction(d.Events.PLAYER_READY,e))}sendRequest(e){if(this.state.goRequest()){let t;this.isAd()?(t=d.Events.AD_REQUEST,this.sendVideoAdAction(t,e)):(t=d.Events.CONTENT_REQUEST,this.sendVideoAction(t,e))}}sendStart(e){if(this.state.goStart()){let t;this.isAd()?(t=d.Events.AD_START,this.parentTracker&&(this.parentTracker.state.isPlaying=!1),this.sendVideoAdAction(t,e)):(t=d.Events.CONTENT_START,this.sendVideoAction(t,e)),this.startHeartbeat(),this.state.goHeartbeat()}}sendEnd(e){if(this.state.goEnd()){let t;e=e||{},this.isAd()?(t=d.Events.AD_END,e.timeSinceAdRequested=this.state.timeSinceRequested.getDeltaTime(),e.timeSinceAdStarted=this.state.timeSinceStarted.getDeltaTime(),this.parentTracker&&(this.parentTracker.state.isPlaying=!0)):(t=d.Events.CONTENT_END,e.timeSinceRequested=this.state.timeSinceRequested.getDeltaTime(),e.timeSinceStarted=this.state.timeSinceStarted.getDeltaTime()),this.stopHeartbeat(),this.isAd()?this.sendVideoAdAction(t,e):this.sendVideoAction(t,e),this.parentTracker&&this.isAd()&&this.parentTracker.state.goLastAd(),this.state.goViewCountUp(),this.state.totalPlaytime=0}}sendPause(e){if(this.state.goPause()){let t=this.isAd()?d.Events.AD_PAUSE:d.Events.CONTENT_PAUSE;this.isAd()?this.sendVideoAdAction(t,e):this.sendVideoAction(t,e)}}sendResume(e){if(this.state.goResume()){let t;e=e||{},this.isAd()?(t=d.Events.AD_RESUME,e.timeSinceAdPaused=this.state.timeSincePaused.getDeltaTime()):(t=d.Events.CONTENT_RESUME,e.timeSincePaused=this.state.timeSincePaused.getDeltaTime()),this.isAd()?this.sendVideoAdAction(t,e):this.sendVideoAction(t,e)}}sendBufferStart(e){if(this.state.goBufferStart()){let t;e=e||{},t=this.isAd()?d.Events.AD_BUFFER_START:d.Events.CONTENT_BUFFER_START,e=this.buildBufferAttributes(e),this._lastBufferType=e.bufferType,this.isAd()?this.sendVideoAdAction(t,e):this.sendVideoAction(t,e)}}sendBufferEnd(e){if(this.state.goBufferEnd()){let t;e=e||{},this.isAd()?(t=d.Events.AD_BUFFER_END,e.timeSinceAdBufferBegin=this.state.timeSinceBufferBegin.getDeltaTime()):(t=d.Events.CONTENT_BUFFER_END,e.timeSinceBufferBegin=this.state.timeSinceBufferBegin.getDeltaTime()),e=this.buildBufferAttributes(e),null!=this._lastBufferType&&(e.bufferType=this._lastBufferType),this.isAd()?this.sendVideoAdAction(t,e):this.sendVideoAction(t,e),this.state.initialBufferingHappened=!0}}buildBufferAttributes(e){return null==e.timeSinceStarted||e.timeSinceStarted<100?e.isInitialBuffering=!this.state.initialBufferingHappened:e.isInitialBuffering=!1,e.bufferType=this.state.calculateBufferType(e.isInitialBuffering),e.timeSinceResumed=this.state.timeSinceResumed.getDeltaTime(),e.timeSinceSeekEnd=this.state.timeSinceSeekEnd.getDeltaTime(),e}sendSeekStart(e){if(this.state.goSeekStart()){let t;t=this.isAd()?d.Events.AD_SEEK_START:d.Events.CONTENT_SEEK_START,this.isAd()?this.sendVideoAdAction(t,e):this.sendVideoAction(t,e)}}sendSeekEnd(e){if(this.state.goSeekEnd()){let t;e=e||{},this.isAd()?(t=d.Events.AD_SEEK_END,e.timeSinceAdSeekBegin=this.state.timeSinceSeekBegin.getDeltaTime()):(t=d.Events.CONTENT_SEEK_END,e.timeSinceSeekBegin=this.state.timeSinceSeekBegin.getDeltaTime()),this.isAd()?this.sendVideoAdAction(t,e):this.sendVideoAction(t,e)}}sendDownload(e){(e=e||{}).state||n.default.warn("Called sendDownload without { state: xxxxx }."),this.sendVideoAction(d.Events.DOWNLOAD,e),this.state.goDownload()}sendError(e){(e=e||{}).isAd=this.isAd(),this.state.goError();let t=this.isAd()?d.Events.AD_ERROR:d.Events.CONTENT_ERROR;this.sendVideoErrorAction(t,e)}sendRenditionChanged(e){let t;(e=e||{}).timeSinceLastRenditionChange=this.state.timeSinceLastRenditionChange.getDeltaTime(),e.shift=this.getRenditionShift(!0),t=this.isAd()?d.Events.AD_RENDITION_CHANGE:d.Events.CONTENT_RENDITION_CHANGE,this.isAd()?this.sendVideoAdAction(t,e):this.sendVideoAction(t,e),this.state.goRenditionChange()}sendHeartbeat(e){if(this.state.isRequested){let t,r=this.getHeartbeat();this.state._hb=!0,r=this.adjustElapsedTimeForPause(r),this.isAd()?(t=d.Events.AD_HEARTBEAT,"bitmovin-ads"===this.getPlayerName()?this.sendVideoAdAction(t,e):this.sendVideoAdAction(t,c({elapsedTime:r},e))):(t=d.Events.CONTENT_HEARTBEAT,this.sendVideoAction(t,c({elapsedTime:r},e))),this.state.goHeartbeat()}}adjustElapsedTimeForPause(e){return this.state._acc&&(e-=this.state._acc,this.state._acc=0),this.state.isPaused&&((e-=this.state.elapsedTime.getDeltaTime())<10&&(e=0),this.state.elapsedTime.start()),this.state._bufferAcc?(e-=this.state._bufferAcc,this.state._bufferAcc=0):this.state.isBuffering&&((e-=this.state.bufferElapsedTime.getDeltaTime())<5&&(e=0),this.state.bufferElapsedTime.start()),Math.max(0,e)}sendAdBreakStart(e){this.isAd()&&this.state.goAdBreakStart()&&(this.state.totalAdPlaytime=0,this.parentTracker&&(this.parentTracker.state.isPlaying=!1),this.sendVideoAdAction(d.Events.AD_BREAK_START,e))}sendAdBreakEnd(e){this.isAd()&&this.state.goAdBreakEnd()&&((e=e||{}).timeSinceAdBreakBegin=this.state.timeSinceAdBreakStart.getDeltaTime(),this.sendVideoAdAction(d.Events.AD_BREAK_END,e),this.parentTracker&&(this.parentTracker.state.isPlaying=!0),this.stopHeartbeat(),this.parentTracker&&this.isAd()&&this.parentTracker.state.goLastAd())}sendAdQuartile(e){this.isAd()&&((e=e||{}).quartile||n.default.warn("Called sendAdQuartile without { quartile: xxxxx }."),e.timeSinceLastAdQuartile=this.state.timeSinceLastAdQuartile.getDeltaTime(),this.sendVideoAdAction(d.Events.AD_QUARTILE,e),this.state.goAdQuartile())}sendAdClick(e){this.isAd()&&((e=e||{}).url||n.default.warn("Called sendAdClick without { url: xxxxx }."),this.sendVideoAdAction(d.Events.AD_CLICK,e))}}function h(e){e.type!==d.Events.AD_ERROR?this.sendVideoAdAction(e.type,e.data):this.sendVideoErrorAction(e.type,e.data)}d.Events={PLAYER_READY:"PLAYER_READY",DOWNLOAD:"DOWNLOAD",ERROR:"ERROR",CONTENT_REQUEST:"CONTENT_REQUEST",CONTENT_START:"CONTENT_START",CONTENT_END:"CONTENT_END",CONTENT_PAUSE:"CONTENT_PAUSE",CONTENT_RESUME:"CONTENT_RESUME",CONTENT_SEEK_START:"CONTENT_SEEK_START",CONTENT_SEEK_END:"CONTENT_SEEK_END",CONTENT_BUFFER_START:"CONTENT_BUFFER_START",CONTENT_BUFFER_END:"CONTENT_BUFFER_END",CONTENT_HEARTBEAT:"CONTENT_HEARTBEAT",CONTENT_RENDITION_CHANGE:"CONTENT_RENDITION_CHANGE",CONTENT_ERROR:"CONTENT_ERROR",AD_REQUEST:"AD_REQUEST",AD_START:"AD_START",AD_END:"AD_END",AD_PAUSE:"AD_PAUSE",AD_RESUME:"AD_RESUME",AD_SEEK_START:"AD_SEEK_START",AD_SEEK_END:"AD_SEEK_END",AD_BUFFER_START:"AD_BUFFER_START",AD_BUFFER_END:"AD_BUFFER_END",AD_HEARTBEAT:"AD_HEARTBEAT",AD_RENDITION_CHANGE:"AD_RENDITION_CHANGE",AD_ERROR:"AD_ERROR",AD_BREAK_START:"AD_BREAK_START",AD_BREAK_END:"AD_BREAK_END",AD_QUARTILE:"AD_QUARTILE",AD_CLICK:"AD_CLICK"},t.default=d},3925:(e,t,r)=>{var n=r(34);e.exports=function(e){return n(e)||null===e}},3994:(e,t,r)=>{var n=r(7657).IteratorPrototype,i=r(2360),s=r(6980),a=r(687),o=r(6269),u=function(){return this};e.exports=function(e,t,r,c){var l=t+" Iterator";return e.prototype=i(n,{next:s(+!c,r)}),a(e,l,!1,!0),o[l]=u,e}},4055:(e,t,r)=>{var n=r(4576),i=r(34),s=n.document,a=i(s)&&i(s.createElement);e.exports=function(e){return a?s.createElement(e):{}}},4117:e=>{e.exports=function(e){return null==e}},4209:(e,t,r)=>{var n=r(8227),i=r(6269),s=n("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||a[s]===e)}},4215:(e,t,r)=>{var n=r(4576),i=r(2839),s=r(2195),a=function(e){return i.slice(0,e.length)===e};e.exports=a("Bun/")?"BUN":a("Cloudflare-Workers")?"CLOUDFLARE":a("Deno/")?"DENO":a("Node.js/")?"NODE":n.Bun&&"string"==typeof Bun.version?"BUN":n.Deno&&"object"==typeof Deno.version?"DENO":"process"===s(n.process)?"NODE":n.window&&n.document?"BROWSER":"REST"},4265:(e,t,r)=>{var n=r(2839);e.exports=/ipad|iphone|ipod/i.test(n)&&"undefined"!=typeof Pebble},4270:(e,t,r)=>{var n=r(9565),i=r(4901),s=r(34),a=TypeError;e.exports=function(e,t){var r,o;if("string"===t&&i(r=e.toString)&&!s(o=n(r,e)))return o;if(i(r=e.valueOf)&&!s(o=n(r,e)))return o;if("string"!==t&&i(r=e.toString)&&!s(o=n(r,e)))return o;throw new a("Can't convert object to primitive value")}},4373:(e,t,r)=>{var n=r(8981),i=r(5610),s=r(6198);e.exports=function(e){for(var t=n(this),r=s(t),a=arguments.length,o=i(a>1?arguments[1]:void 0,r),u=a>2?arguments[2]:void 0,c=void 0===u?r:i(u,r);c>o;)t[o++]=e;return t}},4374:(e,t,r)=>{r(1278),r(3500),Object.defineProperty(t,"__esModule",{value:!0}),t.HarvestScheduler=void 0,r(3792),r(3362),r(2953);var n=r(2431),i=r(7413),s=r(1028),a=r(2347),o=c(r(1051)),u=c(r(6144));function c(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){h(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function h(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t,r,n,i,s,a){try{var o=e[s](a),u=o.value}catch(e){return void r(e)}o.done?t(u):Promise.resolve(u).then(n,i)}function p(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var s=e.apply(t,r);function a(e){f(s,n,i,a,o,"next",e)}function o(e){f(s,n,i,a,o,"throw",e)}a(void 0)})}}t.HarvestScheduler=class{constructor(e){this.eventBuffer=e,this.retryQueueHandler=new i.RetryQueueHandler,this.httpClient=new s.OptimizedHttpClient,this.fallBackUrl="",this.retryCount=0,this.eventBuffer instanceof n.NrVideoEventAggregator&&this.eventBuffer.setSmartHarvestCallback((e,t)=>this.triggerSmartHarvest(e,t)),this.isStarted=!1,this.currentTimerId=null,this.harvestCycle=o.default.INTERVAL,this.isHarvesting=!1,this.setupPageLifecycleHandlers()}startScheduler(){this.isStarted?u.default.warn("Harvest scheduler is already started"):(this.isStarted=!0,u.default.notice("Starting harvest scheduler",{harvestCycle:this.harvestCycle,eventBufferSize:this.eventBuffer?this.eventBuffer.size():0}),this.scheduleNextHarvest())}stopScheduler(){this.isStarted&&(this.isStarted=!1,this.currentTimerId&&(clearTimeout(this.currentTimerId),this.currentTimerId=null),u.default.notice("Harvest scheduler stopped"))}triggerSmartHarvest(e,t){var r=this;return p(function*(){if(u.default.notice(`${e} harvest triggered at ${t}% threshold`,{type:e,threshold:t}),r.eventBuffer&&!r.eventBuffer.isEmpty()){r.currentTimerId&&(clearTimeout(r.currentTimerId),r.currentTimerId=null);try{yield r.triggerHarvest({})}catch(t){u.default.error(`${e} harvest failed:`,t.message)}finally{r.isStarted&&r.scheduleNextHarvest()}}})()}scheduleNextHarvest(){if(!this.isStarted)return;const e=this.harvestCycle;this.currentTimerId=setTimeout(()=>this.onHarvestInterval(),e)}onHarvestInterval(){var e=this;return p(function*(){try{const t=e.eventBuffer&&!e.eventBuffer.isEmpty(),r=e.retryQueueHandler&&e.retryQueueHandler.getQueueSize()>0;if(!t&&!r)return;yield e.triggerHarvest({})}catch(e){u.default.error("Error during scheduled harvest:",e.message)}finally{e.scheduleNextHarvest()}})()}triggerHarvest(){var e=this;return p(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){if(e.isHarvesting)return{success:!1,reason:"harvest_in_progress"};e.isHarvesting=!0;try{let r=e.drainEvents(t);if(t.isFinalHarvest){const t=o.default.MAX_BEACON_SIZE;(0,a.dataSize)(r)>t&&(r=e.trimEventsToFit(r,t))}const n=yield e.sendChunk(r,t,!0);return{success:n.success,totalChunks:1,results:[n]}}catch(t){return u.default.error("Harvest cycle failed:",t.message),e.handleHarvestFailure(t),{success:!1,error:t.message,consecutiveFailures:e.consecutiveFailures}}finally{e.isHarvesting=!1}}()}).apply(this,arguments)}trimEventsToFit(e,t){if(0===e.length)return e;const r=[];let n=0;for(let i=e.length-1;i>=0;i--){const s=e[i],o=(0,a.dataSize)({ins:[s,...r]});o>t||(r.unshift(s),n=o)}const i=e.length-r.length;if(i>0){const s=e.slice(0,i);u.default.warn(`Discarded ${i} events to fit beacon size limit`,{originalCount:e.length,trimmedCount:r.length,finalSize:n,maxSize:t}),this.retryQueueHandler&&this.retryQueueHandler.addFailedEvents(s)}return r}drainEvents(){const e=this.eventBuffer.drain();let t=[...e],r=(0,a.dataSize)(e);if(this.retryQueueHandler&&this.retryQueueHandler.getQueueSize()>0){const e=o.default.MAX_PAYLOAD_SIZE-r,n=o.default.MAX_EVENTS_PER_BATCH-t.length;if(e>0&&n>0){const r=this.retryQueueHandler.getRetryEventsToFit(e,n);r.length>0&&(t=[...r,...t])}}return t}sendChunk(e,t,r){var n=this;return p(function*(){const i={url:(0,a.buildUrl)(n.fallBackUrl),payload:{body:{ins:e}},options:d(d({},t),{},{isLastChunk:r})};return new Promise(t=>{n.httpClient.send(i,r=>{r.retry?n.handleRequestFailure(e):(n.retryCount=0,n.fallBackUrl=""),t({success:!r.retry,status:r.status,error:r.error,chunk:e,eventCount:e.length})})})})()}handleRequestFailure(e){var t;this.retryQueueHandler.addFailedEvents(e),"US"===(null===(t=window.NRVIDEO)||void 0===t||null===(t=t.info)||void 0===t?void 0:t.region)&&(this.retryCount++,this.retryCount>5?(this.retryCount=0,this.fallBackUrl=""):this.retryCount>=2&&(this.fallBackUrl=o.default.COLLECTOR.US[1]))}handleHarvestFailure(e){this.consecutiveFailures++,u.default.warn("Harvest failure handled",{error:e.message,consecutiveFailures:this.consecutiveFailures})}updateHarvestInterval(e){"number"!=typeof e&&isNaN(e)?u.default.warn("Invalid newInterval provided to updateHarvestInterval"):e<1e3||e>3e5?u.default.warn("newInterval out of bounds (1000-300000), ignoring"):this.harvestCycle!==e&&(this.harvestCycle=e,u.default.notice("Updated harvestCycle:",this.harvestCycle),this.currentTimerId&&(clearTimeout(this.currentTimerId),this.currentTimerId=null),this.isStarted&&this.scheduleNextHarvest())}setupPageLifecycleHandlers(){let e=!1;const t=()=>{e||(e=!0,this.triggerHarvest({isFinalHarvest:!0,force:!0}))};document.addEventListener("visibilitychange",()=>{document.hidden&&t()}),window.addEventListener("pagehide",()=>{t()}),window.addEventListener("beforeunload",()=>{t()})}}},4376:(e,t,r)=>{var n=r(2195);e.exports=Array.isArray||function(e){return"Array"===n(e)}},4399:(e,t,r)=>{r(1278),r(3362),r(3500),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=(n=r(6144))&&n.__esModule?n:{default:n},s=r(1449),a=r(659);function o(e,t,r,n,i,s,a){try{var o=e[s](a),u=o.value}catch(e){return void r(e)}o.done?t(u):Promise.resolve(u).then(n,i)}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){l(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function l(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class d{static addTracker(e,t){null!=t&&t.info&&(0,a.setVideoConfig)(t.info),e.on&&e.emit?(h.push(e),e.on("*",f),"function"==typeof e.trackerInit&&e.trackerInit()):i.default.error("Tried to load a non-tracker.",e)}static removeTracker(e){e.off("*",f),e.dispose();let t=h.indexOf(e);-1!==t&&h.splice(t,1)}static getTrackers(){return h}static send(e,t,r){const n=c({actionName:t},r);return(0,s.recordEvent)(e,n)}static sendError(e){return(0,s.recordEvent)("VideoErrorAction",c({actionName:"ERROR"},e))}static forceHarvest(){return(e=function*(){try{const e=r(1487).videoAnalyticsHarvester;return yield e.forceHarvest()}catch(e){return i.default.error("Failed to force harvest:",e.message),{success:!1,error:e.message}}},function(){var t=this,r=arguments;return new Promise(function(n,i){var s=e.apply(t,r);function a(e){o(s,n,i,a,u,"next",e)}function u(e){o(s,n,i,a,u,"throw",e)}a(void 0)})})();var e}}let h=[];function f(e){try{let t=function(e){let t={};for(let r in e)null!==e[r]&&void 0!==e[r]&&(t[r]=e[r]);return t}(e.data);i.default.level<=i.default.Levels.DEBUG?i.default.notice("Sent",e.type,t):i.default.notice("Sent",e.type),d.send(e.eventType,e.type,t)}catch(e){i.default.error("Error in event handler:",e.message)}}t.default=d},4428:(e,t,r)=>{var n=r(8227)("iterator"),i=!1;try{var s=0,a={next:function(){return{done:!!s++}},return:function(){i=!0}};a[n]=function(){return this},Array.from(a,function(){throw 2})}catch(e){}e.exports=function(e,t){try{if(!t&&!i)return!1}catch(e){return!1}var r=!1;try{var s={};s[n]=function(){return{next:function(){return{done:r=!0}}}},e(s)}catch(e){}return r}},4488:(e,t,r)=>{var n=r(7680),i=Math.floor,s=function(e,t){var r=e.length;if(r<8)for(var a,o,u=1;u<r;){for(o=u,a=e[u];o&&t(e[o-1],a)>0;)e[o]=e[--o];o!==u++&&(e[o]=a)}else for(var c=i(r/2),l=s(n(e,0,c),t),d=s(n(e,c),t),h=l.length,f=d.length,p=0,v=0;p<h||v<f;)e[p+v]=p<h&&v<f?t(l[p],d[v])<=0?l[p++]:d[v++]:p<h?l[p++]:d[v++];return e};e.exports=s},4495:(e,t,r)=>{var n=r(9519),i=r(9039),s=r(4576).String;e.exports=!!Object.getOwnPropertySymbols&&!i(function(){var e=Symbol("symbol detection");return!s(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41})},4576:function(e,t,r){var n=function(e){return e&&e.Math===Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||n("object"==typeof this&&this)||function(){return this}()||Function("return this")()},4598:(e,t,r)=>{var n=r(9039);e.exports=function(e,t){var r=[][e];return!!r&&n(function(){r.call(null,t||function(){return 1},1)})}},4644:(e,t,r)=>{var n,i,s,a=r(7811),o=r(3724),u=r(4576),c=r(4901),l=r(34),d=r(9297),h=r(6955),f=r(6823),p=r(6699),v=r(6840),g=r(2106),y=r(1625),m=r(2787),E=r(2967),b=r(8227),A=r(3392),S=r(1181),T=S.enforce,w=S.get,O=u.Int8Array,R=O&&O.prototype,_=u.Uint8ClampedArray,P=_&&_.prototype,D=O&&m(O),x=R&&m(R),I=Object.prototype,L=u.TypeError,N=b("toStringTag"),C=A("TYPED_ARRAY_TAG"),k="TypedArrayConstructor",j=a&&!!E&&"Opera"!==h(u.opera),B=!1,M={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},H={BigInt64Array:8,BigUint64Array:8},V=function(e){var t=m(e);if(l(t)){var r=w(t);return r&&d(r,k)?r[k]:V(t)}},U=function(e){if(!l(e))return!1;var t=h(e);return d(M,t)||d(H,t)};for(n in M)(s=(i=u[n])&&i.prototype)?T(s)[k]=i:j=!1;for(n in H)(s=(i=u[n])&&i.prototype)&&(T(s)[k]=i);if((!j||!c(D)||D===Function.prototype)&&(D=function(){throw new L("Incorrect invocation")},j))for(n in M)u[n]&&E(u[n],D);if((!j||!x||x===I)&&(x=D.prototype,j))for(n in M)u[n]&&E(u[n].prototype,x);if(j&&m(P)!==x&&E(P,x),o&&!d(x,N))for(n in B=!0,g(x,N,{configurable:!0,get:function(){return l(this)?this[C]:void 0}}),M)u[n]&&p(u[n],C,n);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:j,TYPED_ARRAY_TAG:B&&C,aTypedArray:function(e){if(U(e))return e;throw new L("Target is not a typed array")},aTypedArrayConstructor:function(e){if(c(e)&&(!E||y(D,e)))return e;throw new L(f(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,r,n){if(o){if(r)for(var i in M){var s=u[i];if(s&&d(s.prototype,e))try{delete s.prototype[e]}catch(r){try{s.prototype[e]=t}catch(e){}}}x[e]&&!r||v(x,e,r?t:j&&R[e]||t,n)}},exportTypedArrayStaticMethod:function(e,t,r){var n,i;if(o){if(E){if(r)for(n in M)if((i=u[n])&&d(i,e))try{delete i[e]}catch(e){}if(D[e]&&!r)return;try{return v(D,e,r?t:j&&D[e]||t)}catch(e){}}for(n in M)!(i=u[n])||i[e]&&!r||v(i,e,t)}},getTypedArrayConstructor:V,isView:function(e){if(!l(e))return!1;var t=h(e);return"DataView"===t||d(M,t)||d(H,t)},isTypedArray:U,TypedArray:D,TypedArrayPrototype:x}},4659:(e,t,r)=>{var n=r(3724),i=r(4913),s=r(6980);e.exports=function(e,t,r){n?i.f(e,t,s(0,r)):e[t]=r}},4901:e=>{var t="object"==typeof document&&document.all;e.exports=void 0===t&&void 0!==t?function(e){return"function"==typeof e||e===t}:function(e){return"function"==typeof e}},4913:(e,t,r)=>{var n=r(3724),i=r(5917),s=r(8686),a=r(8551),o=r(6969),u=TypeError,c=Object.defineProperty,l=Object.getOwnPropertyDescriptor,d="enumerable",h="configurable",f="writable";t.f=n?s?function(e,t,r){if(a(e),t=o(t),a(r),"function"==typeof e&&"prototype"===t&&"value"in r&&f in r&&!r[f]){var n=l(e,t);n&&n[f]&&(e[t]=r.value,r={configurable:h in r?r[h]:n[h],enumerable:d in r?r[d]:n[d],writable:!1})}return c(e,t,r)}:c:function(e,t,r){if(a(e),t=o(t),a(r),i)try{return c(e,t,r)}catch(e){}if("get"in r||"set"in r)throw new u("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},5031:(e,t,r)=>{var n=r(7751),i=r(9504),s=r(8480),a=r(3717),o=r(8551),u=i([].concat);e.exports=n("Reflect","ownKeys")||function(e){var t=s.f(o(e)),r=a.f;return r?u(t,r(e)):t}},5044:(e,t,r)=>{var n=r(4644),i=r(4373),s=r(5854),a=r(6955),o=r(9565),u=r(9504),c=r(9039),l=n.aTypedArray,d=n.exportTypedArrayMethod,h=u("".slice);d("fill",function(e){var t=arguments.length;l(this);var r="Big"===h(a(this),0,3)?s(e):+e;return o(i,this,r,t>1?arguments[1]:void 0,t>2?arguments[2]:void 0)},c(function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),1!==e}))},5370:(e,t,r)=>{var n=r(6198);e.exports=function(e,t,r){for(var i=0,s=arguments.length>2?r:n(t),a=new e(s);s>i;)a[i]=t[i++];return a}},5397:(e,t,r)=>{var n=r(7055),i=r(7750);e.exports=function(e){return n(i(e))}},5506:(e,t,r)=>{var n=r(6518),i=r(2357).entries;n({target:"Object",stat:!0},{entries:function(e){return i(e)}})},5548:(e,t,r)=>{var n=r(3517),i=r(6823),s=TypeError;e.exports=function(e){if(n(e))return e;throw new s(i(e)+" is not a constructor")}},5610:(e,t,r)=>{var n=r(1291),i=Math.max,s=Math.min;e.exports=function(e,t){var r=n(e);return r<0?i(r+t,0):s(r,t)}},5617:(e,t,r)=>{var n=r(3164);e.exports=Math.fround||function(e){return n(e,1.1920928955078125e-7,34028234663852886e22,11754943508222875e-54)}},5745:(e,t,r)=>{var n=r(7629);e.exports=function(e,t){return n[e]||(n[e]=t||{})}},5823:(e,t,r)=>{var n=r(6518),i=r(4576),s=r(9565),a=r(3724),o=r(2805),u=r(4644),c=r(6346),l=r(679),d=r(6980),h=r(6699),f=r(2087),p=r(8014),v=r(7696),g=r(8229),y=r(8319),m=r(6969),E=r(9297),b=r(6955),A=r(34),S=r(757),T=r(2360),w=r(1625),O=r(2967),R=r(8480).f,_=r(3251),P=r(9213).forEach,D=r(7633),x=r(2106),I=r(4913),L=r(7347),N=r(5370),C=r(1181),k=r(3167),j=C.get,B=C.set,M=C.enforce,H=I.f,V=L.f,U=i.RangeError,F=c.ArrayBuffer,z=F.prototype,Q=c.DataView,W=u.NATIVE_ARRAY_BUFFER_VIEWS,q=u.TYPED_ARRAY_TAG,G=u.TypedArray,K=u.TypedArrayPrototype,Y=u.isTypedArray,$="BYTES_PER_ELEMENT",X="Wrong length",J=function(e,t){x(e,t,{configurable:!0,get:function(){return j(this)[t]}})},Z=function(e){var t;return w(z,e)||"ArrayBuffer"===(t=b(e))||"SharedArrayBuffer"===t},ee=function(e,t){return Y(e)&&!S(t)&&t in e&&f(+t)&&t>=0},te=function(e,t){return t=m(t),ee(e,t)?d(2,e[t]):V(e,t)},re=function(e,t,r){return t=m(t),!(ee(e,t)&&A(r)&&E(r,"value"))||E(r,"get")||E(r,"set")||r.configurable||E(r,"writable")&&!r.writable||E(r,"enumerable")&&!r.enumerable?H(e,t,r):(e[t]=r.value,e)};a?(W||(L.f=te,I.f=re,J(K,"buffer"),J(K,"byteOffset"),J(K,"byteLength"),J(K,"length")),n({target:"Object",stat:!0,forced:!W},{getOwnPropertyDescriptor:te,defineProperty:re}),e.exports=function(e,t,r){var a=e.match(/\d+/)[0]/8,u=e+(r?"Clamped":"")+"Array",c="get"+e,d="set"+e,f=i[u],m=f,E=m&&m.prototype,b={},S=function(e,t){H(e,t,{get:function(){return function(e,t){var r=j(e);return r.view[c](t*a+r.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,n){var i=j(e);i.view[d](t*a+i.byteOffset,r?y(n):n,!0)}(this,t,e)},enumerable:!0})};W?o&&(m=t(function(e,t,r,n){return l(e,E),k(A(t)?Z(t)?void 0!==n?new f(t,g(r,a),n):void 0!==r?new f(t,g(r,a)):new f(t):Y(t)?N(m,t):s(_,m,t):new f(v(t)),e,m)}),O&&O(m,G),P(R(f),function(e){e in m||h(m,e,f[e])}),m.prototype=E):(m=t(function(e,t,r,n){l(e,E);var i,o,u,c=0,d=0;if(A(t)){if(!Z(t))return Y(t)?N(m,t):s(_,m,t);i=t,d=g(r,a);var h=t.byteLength;if(void 0===n){if(h%a)throw new U(X);if((o=h-d)<0)throw new U(X)}else if((o=p(n)*a)+d>h)throw new U(X);u=o/a}else u=v(t),i=new F(o=u*a);for(B(e,{buffer:i,byteOffset:d,byteLength:o,length:u,view:new Q(i)});c<u;)S(e,c++)}),O&&O(m,G),E=m.prototype=T(K)),E.constructor!==m&&h(E,"constructor",m),M(E).TypedArrayConstructor=m,q&&h(E,q,u);var w=m!==f;b[u]=m,n({global:!0,constructor:!0,forced:w,sham:!W},b),$ in m||h(m,$,a),$ in E||h(E,$,a),D(u)}):e.exports=function(){}},5854:(e,t,r)=>{var n=r(2777),i=TypeError;e.exports=function(e){var t=n(e,"number");if("number"==typeof t)throw new i("Can't convert number to bigint");return BigInt(t)}},5917:(e,t,r)=>{var n=r(3724),i=r(9039),s=r(4055);e.exports=!n&&!i(function(){return 7!==Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a})},5966:(e,t,r)=>{var n=r(9306),i=r(4117);e.exports=function(e,t){var r=e[t];return i(r)?void 0:n(r)}},6034:(e,t,r)=>{var n=r(6518),i=r(2357).values;n({target:"Object",stat:!0},{values:function(e){return i(e)}})},6043:(e,t,r)=>{var n=r(9306),i=TypeError,s=function(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw new i("Bad Promise constructor");t=e,r=n}),this.resolve=n(t),this.reject=n(r)};e.exports.f=function(e){return new s(e)}},6080:(e,t,r)=>{var n=r(7476),i=r(9306),s=r(616),a=n(n.bind);e.exports=function(e,t){return i(e),void 0===t?e:s?a(e,t):function(){return e.apply(t,arguments)}}},6119:(e,t,r)=>{var n=r(5745),i=r(3392),s=n("keys");e.exports=function(e){return s[e]||(s[e]=i(e))}},6144:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(7495);class n{static error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];i(t,n.Levels.ERROR,"darkred")}static warn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];i(t,n.Levels.WARNING,"darkorange")}static notice(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];i([].slice.call(arguments),n.Levels.NOTICE,"darkcyan")}static debug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];i(t,n.Levels.DEBUG,"indigo")}static debugCommonVideoEvents(e,t,r){try{if(n.level<=n.Levels.DEBUG){r=r||function(e){n.debug("Event: "+e.type)};var i=["canplay","buffering","waiting","ended","play","playing","pause","resume","error","abort","seek","seeking","seeked","stalled","dispose","loadeddata","loadstart","loadedmetadata"];t&&(null===t[0]?(t.shift(),i=t):i=i.concat(t));for(var s=0;s<i.length;s++)"function"==typeof e?e.call(window,i[s],r):e.on?e.on(i[s],r):e.addEventListener?e.addEventListener(i[s],r):e.addEventHandler?e.addEventHandler(i[s],r):n.warn("debugCommonVideoEvents: No common listener function found for ",e)}}catch(e){n.warn(e)}}}function i(e,t,r){t=t||n.Levels.NOTICE,r=r||"darkcyan";var i,o,u=n.prefix;n.includeTime&&(u+="["+("0"+(i=new Date).getDate()).slice(-2)+":"+("0"+i.getMinutes()).slice(-2)+":"+("0"+i.getSeconds()).slice(-2)+"."+("00"+i.getMilliseconds()).slice(-3)+"] "),u+=function(e){return a[e]}(t)+":",n.level<=t&&t!==n.Levels.SILENT&&(!n.colorful||"undefined"!=typeof document&&document.documentMode?s(e,u):(o=t===n.Levels.ERROR&&console.error?console.error:t===n.Levels.WARNING&&console.warn?console.warn:t===n.Levels.DEBUG&&console.debug&&null==window.cast?console.debug:console.log,u="%c"+u,e.splice(0,0,u,"color: "+r),o.apply(console,e)))}function s(e,t){if(e instanceof Array)for(var r in e)s(e[r],t);else"string"==typeof e?console.log(t+" "+e):(console.log(t+"â†µ"),console.log(e))}n.Levels={SILENT:5,ERROR:4,WARNING:3,NOTICE:2,DEBUG:1,ALL:0},n.level=n.Levels.ERROR,n.colorful=!0,n.includeTime=!0,n.prefix="[nrvideo]";const a={4:"e",3:"w",2:"n",1:"d"};!function(){if("undefined"!=typeof window&&window.location&&window.location.search){var e=/\?.*&*nrvideo-debug=(.+)/i.exec(window.location.search);null!==e&&("true"===e[1]?n.level=n.Levels.ALL:n.level=e[1]),null!==/\?.*&*nrvideo-colors=false/i.exec(window.location.search)&&(n.colorful=!1)}}(),t.default=n},6193:(e,t,r)=>{var n=r(4215);e.exports="NODE"===n},6198:(e,t,r)=>{var n=r(8014);e.exports=function(e){return n(e.length)}},6269:e=>{e.exports={}},6279:(e,t,r)=>{var n=r(6840);e.exports=function(e,t,r){for(var i in t)n(e,i,t[i],r);return e}},6346:(e,t,r)=>{var n=r(4576),i=r(9504),s=r(3724),a=r(7811),o=r(350),u=r(6699),c=r(2106),l=r(6279),d=r(9039),h=r(679),f=r(1291),p=r(8014),v=r(7696),g=r(5617),y=r(8490),m=r(2787),E=r(2967),b=r(4373),A=r(7680),S=r(3167),T=r(7740),w=r(687),O=r(1181),R=o.PROPER,_=o.CONFIGURABLE,P="ArrayBuffer",D="DataView",x="prototype",I="Wrong index",L=O.getterFor(P),N=O.getterFor(D),C=O.set,k=n[P],j=k,B=j&&j[x],M=n[D],H=M&&M[x],V=Object.prototype,U=n.Array,F=n.RangeError,z=i(b),Q=i([].reverse),W=y.pack,q=y.unpack,G=function(e){return[255&e]},K=function(e){return[255&e,e>>8&255]},Y=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},$=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},X=function(e){return W(g(e),23,4)},J=function(e){return W(e,52,8)},Z=function(e,t,r){c(e[x],t,{configurable:!0,get:function(){return r(this)[t]}})},ee=function(e,t,r,n){var i=N(e),s=v(r),a=!!n;if(s+t>i.byteLength)throw new F(I);var o=i.bytes,u=s+i.byteOffset,c=A(o,u,u+t);return a?c:Q(c)},te=function(e,t,r,n,i,s){var a=N(e),o=v(r),u=n(+i),c=!!s;if(o+t>a.byteLength)throw new F(I);for(var l=a.bytes,d=o+a.byteOffset,h=0;h<t;h++)l[d+h]=u[c?h:t-h-1]};if(a){var re=R&&k.name!==P;d(function(){k(1)})&&d(function(){new k(-1)})&&!d(function(){return new k,new k(1.5),new k(NaN),1!==k.length||re&&!_})?re&&_&&u(k,"name",P):((j=function(e){return h(this,B),S(new k(v(e)),this,j)})[x]=B,B.constructor=j,T(j,k)),E&&m(H)!==V&&E(H,V);var ne=new M(new j(2)),ie=i(H.setInt8);ne.setInt8(0,2147483648),ne.setInt8(1,2147483649),!ne.getInt8(0)&&ne.getInt8(1)||l(H,{setInt8:function(e,t){ie(this,e,t<<24>>24)},setUint8:function(e,t){ie(this,e,t<<24>>24)}},{unsafe:!0})}else B=(j=function(e){h(this,B);var t=v(e);C(this,{type:P,bytes:z(U(t),0),byteLength:t}),s||(this.byteLength=t,this.detached=!1)})[x],H=(M=function(e,t,r){h(this,H),h(e,B);var n=L(e),i=n.byteLength,a=f(t);if(a<0||a>i)throw new F("Wrong offset");if(a+(r=void 0===r?i-a:p(r))>i)throw new F("Wrong length");C(this,{type:D,buffer:e,byteLength:r,byteOffset:a,bytes:n.bytes}),s||(this.buffer=e,this.byteLength=r,this.byteOffset=a)})[x],s&&(Z(j,"byteLength",L),Z(M,"buffer",N),Z(M,"byteLength",N),Z(M,"byteOffset",N)),l(H,{getInt8:function(e){return ee(this,1,e)[0]<<24>>24},getUint8:function(e){return ee(this,1,e)[0]},getInt16:function(e){var t=ee(this,2,e,arguments.length>1&&arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=ee(this,2,e,arguments.length>1&&arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return $(ee(this,4,e,arguments.length>1&&arguments[1]))},getUint32:function(e){return $(ee(this,4,e,arguments.length>1&&arguments[1]))>>>0},getFloat32:function(e){return q(ee(this,4,e,arguments.length>1&&arguments[1]),23)},getFloat64:function(e){return q(ee(this,8,e,arguments.length>1&&arguments[1]),52)},setInt8:function(e,t){te(this,1,e,G,t)},setUint8:function(e,t){te(this,1,e,G,t)},setInt16:function(e,t){te(this,2,e,K,t,arguments.length>2&&arguments[2])},setUint16:function(e,t){te(this,2,e,K,t,arguments.length>2&&arguments[2])},setInt32:function(e,t){te(this,4,e,Y,t,arguments.length>2&&arguments[2])},setUint32:function(e,t){te(this,4,e,Y,t,arguments.length>2&&arguments[2])},setFloat32:function(e,t){te(this,4,e,X,t,arguments.length>2&&arguments[2])},setFloat64:function(e,t){te(this,8,e,J,t,arguments.length>2&&arguments[2])}});w(j,P),w(M,D),e.exports={ArrayBuffer:j,DataView:M}},6395:e=>{e.exports=!1},6455:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;class r{constructor(){this.reset()}reset(){this.startTime=0,this.stopTime=0,this.offset=0}getDeltaTime(){return this.startTime?this.offset+((new Date).getTime()-this.startTime):null}start(){this.startTime=(new Date).getTime(),this.stopTime=0}stop(){return this.stopTime=(new Date).getTime(),this.getDeltaTime()}clone(){var e=new r;return e.startTime=this.startTime,e.stopTime=this.stopTime,e.offset=this.offset,e}}t.default=r},6469:(e,t,r)=>{var n=r(8227),i=r(2360),s=r(4913).f,a=n("unscopables"),o=Array.prototype;void 0===o[a]&&s(o,a,{configurable:!0,value:i(null)}),e.exports=function(e){o[a][e]=!0}},6499:(e,t,r)=>{var n=r(6518),i=r(9565),s=r(9306),a=r(6043),o=r(1103),u=r(2652);n({target:"Promise",stat:!0,forced:r(537)},{all:function(e){var t=this,r=a.f(t),n=r.resolve,c=r.reject,l=o(function(){var r=s(t.resolve),a=[],o=0,l=1;u(e,function(e){var s=o++,u=!1;l++,i(r,t,e).then(function(e){u||(u=!0,a[s]=e,--l||n(a))},c)}),--l||n(a)});return l.error&&c(l.value),r.promise}})},6518:(e,t,r)=>{var n=r(4576),i=r(7347).f,s=r(6699),a=r(6840),o=r(9433),u=r(7740),c=r(2796);e.exports=function(e,t){var r,l,d,h,f,p=e.target,v=e.global,g=e.stat;if(r=v?n:g?n[p]||o(p,{}):n[p]&&n[p].prototype)for(l in t){if(h=t[l],d=e.dontCallGetSet?(f=i(r,l))&&f.value:r[l],!c(v?l:p+(g?".":"#")+l,e.forced)&&void 0!==d){if(typeof h==typeof d)continue;u(h,d)}(e.sham||d&&d.sham)&&s(h,"sham",!0),a(r,l,h,e)}}},6699:(e,t,r)=>{var n=r(3724),i=r(4913),s=r(6980);e.exports=n?function(e,t,r){return i.f(e,t,s(1,r))}:function(e,t,r){return e[t]=r,e}},6706:(e,t,r)=>{var n=r(9504),i=r(9306);e.exports=function(e,t,r){try{return n(i(Object.getOwnPropertyDescriptor(e,t)[r]))}catch(e){}}},6801:(e,t,r)=>{var n=r(3724),i=r(8686),s=r(4913),a=r(8551),o=r(5397),u=r(1072);t.f=n&&!i?Object.defineProperties:function(e,t){a(e);for(var r,n=o(t),i=u(t),c=i.length,l=0;c>l;)s.f(e,r=i[l++],n[r]);return e}},6823:e=>{var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},6837:e=>{var t=TypeError;e.exports=function(e){if(e>9007199254740991)throw t("Maximum allowed index exceeded");return e}},6840:(e,t,r)=>{var n=r(4901),i=r(4913),s=r(283),a=r(9433);e.exports=function(e,t,r,o){o||(o={});var u=o.enumerable,c=void 0!==o.name?o.name:t;if(n(r)&&s(r,c,o),o.global)u?e[t]=r:a(t,r);else{try{o.unsafe?e[t]&&(u=!0):delete e[t]}catch(e){}u?e[t]=r:i.f(e,t,{value:r,enumerable:!1,configurable:!o.nonConfigurable,writable:!o.nonWritable})}return e}},6955:(e,t,r)=>{var n=r(2140),i=r(4901),s=r(2195),a=r(8227)("toStringTag"),o=Object,u="Arguments"===s(function(){return arguments}());e.exports=n?s:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=o(e),a))?r:u?s(t):"Object"===(n=s(t))&&i(t.callee)?"Arguments":n}},6969:(e,t,r)=>{var n=r(2777),i=r(757);e.exports=function(e){var t=n(e,"string");return i(t)?t:t+""}},6980:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},7040:(e,t,r)=>{var n=r(4495);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},7055:(e,t,r)=>{var n=r(9504),i=r(9039),s=r(2195),a=Object,o=n("".split);e.exports=i(function(){return!a("z").propertyIsEnumerable(0)})?function(e){return"String"===s(e)?o(e,""):a(e)}:a},7323:(e,t,r)=>{var n,i,s=r(9565),a=r(9504),o=r(655),u=r(7979),c=r(8429),l=r(5745),d=r(2360),h=r(1181).get,f=r(3635),p=r(8814),v=l("native-string-replace",String.prototype.replace),g=RegExp.prototype.exec,y=g,m=a("".charAt),E=a("".indexOf),b=a("".replace),A=a("".slice),S=(i=/b*/g,s(g,n=/a/,"a"),s(g,i,"a"),0!==n.lastIndex||0!==i.lastIndex),T=c.BROKEN_CARET,w=void 0!==/()??/.exec("")[1];(S||w||T||f||p)&&(y=function(e){var t,r,n,i,a,c,l,f=this,p=h(f),O=o(e),R=p.raw;if(R)return R.lastIndex=f.lastIndex,t=s(y,R,O),f.lastIndex=R.lastIndex,t;var _=p.groups,P=T&&f.sticky,D=s(u,f),x=f.source,I=0,L=O;if(P&&(D=b(D,"y",""),-1===E(D,"g")&&(D+="g"),L=A(O,f.lastIndex),f.lastIndex>0&&(!f.multiline||f.multiline&&"\n"!==m(O,f.lastIndex-1))&&(x="(?: "+x+")",L=" "+L,I++),r=new RegExp("^(?:"+x+")",D)),w&&(r=new RegExp("^"+x+"$(?!\\s)",D)),S&&(n=f.lastIndex),i=s(g,P?r:f,L),P?i?(i.input=A(i.input,I),i[0]=A(i[0],I),i.index=f.lastIndex,f.lastIndex+=i[0].length):f.lastIndex=0:S&&i&&(f.lastIndex=f.global?i.index+i[0].length:n),w&&i&&i.length>1&&s(v,i[0],r,function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(i[a]=void 0)}),i&&_)for(i.groups=c=d(null),a=0;a<_.length;a++)c[(l=_[a])[0]]=i[l[1]];return i}),e.exports=y},7328:(e,t,r)=>{r(9463),r(3792),r(7495),r(2953),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(5506);var n=s(r(6455)),i=s(r(6144));function s(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,s,a,o=[],u=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}t.default=class{constructor(){this.reset(),this._createdAt=Date.now(),this._hb=!0,this._acc=0,this._bufferAcc=0}reset(){this._viewSession=null,this._viewCount=0,this._isAd=!1,this.numberOfErrors=0,this.numberOfAds=0,this.numberOfVideos=0,this.totalPlaytime=0,this.totalAdPlaytime=0,this.isAdBreak=!1,this.initialBufferingHappened=!1,this.resetFlags(),this.resetChronos()}resetFlags(){this.isPlayerReady=!1,this.isRequested=!1,this.isStarted=!1,this.isPaused=!1,this.isSeeking=!1,this.isBuffering=!1,this.isPlaying=!1}resetChronos(){this.timeSinceRequested=new n.default,this.timeSinceStarted=new n.default,this.timeSincePaused=new n.default,this.timeSinceSeekBegin=new n.default,this.timeSinceBufferBegin=new n.default,this.timeSinceAdBreakStart=new n.default,this.timeSinceLastDownload=new n.default,this.timeSinceLastHeartbeat=new n.default,this.timeSinceLastRenditionChange=new n.default,this.timeSinceLastAdQuartile=new n.default,this.timeSinceLastAd=new n.default,this.timeSinceLastError=new n.default,this.timeSinceLastAdError=new n.default,this.timeSinceResumed=new n.default,this.timeSinceSeekEnd=new n.default,this.playtimeSinceLastEvent=new n.default,this.customTimeSinceAttributes={},this.elapsedTime=new n.default,this.bufferElapsedTime=new n.default}isAd(){return this._isAd}setIsAd(e){this._isAd=e}setTimeSinceAttribute(e){this.customTimeSinceAttributes[e]=new n.default,this.customTimeSinceAttributes[e].start()}removeTimeSinceAttribute(e){delete this.customTimeSinceAttributes[e]}getViewSession(){if(!this._viewSession){let e=(new Date).getTime(),t=Math.random().toString(36).substring(2)+Math.random().toString(36).substring(2);this._viewSession=e+"-"+t}return this._viewSession}getViewId(){return this.getViewSession()+"-"+this._viewCount}getStateAttributes(e){e=e||{},this.isAd()?(this.isRequested&&(e.timeSinceAdRequested=this.timeSinceRequested.getDeltaTime(),e.timeSinceLastAdHeartbeat=this.timeSinceLastHeartbeat.getDeltaTime()),this.isStarted&&(e.timeSinceAdStarted=this.timeSinceStarted.getDeltaTime()),this.isPaused&&(e.timeSinceAdPaused=this.timeSincePaused.getDeltaTime()),this.isBuffering&&(e.timeSinceAdBufferBegin=this.timeSinceBufferBegin.getDeltaTime()),this.isSeeking&&(e.timeSinceAdSeekBegin=this.timeSinceSeekBegin.getDeltaTime()),this.isAdBreak&&(e.timeSinceAdBreakBegin=this.timeSinceAdBreakStart.getDeltaTime()),this.numberOfErrors>0&&this.timeSinceLastAdError.startTime>0&&(e.timeSinceLastAdError=this.timeSinceLastAdError.getDeltaTime()),e.numberOfAds=this.numberOfAds):(this.isRequested&&(e.timeSinceRequested=this.timeSinceRequested.getDeltaTime(),e.timeSinceLastHeartbeat=this.timeSinceLastHeartbeat.getDeltaTime()),this.isStarted&&(e.timeSinceStarted=this.timeSinceStarted.getDeltaTime()),this.isPaused&&(e.timeSincePaused=this.timeSincePaused.getDeltaTime()),this.isBuffering&&(e.timeSinceBufferBegin=this.timeSinceBufferBegin.getDeltaTime()),this.isSeeking&&(e.timeSinceSeekBegin=this.timeSinceSeekBegin.getDeltaTime()),e.timeSinceLastAd=this.timeSinceLastAd.getDeltaTime(),e.numberOfVideos=this.numberOfVideos),e.numberOfErrors=this.numberOfErrors,this.numberOfErrors>0&&this.timeSinceLastError.startTime>0&&(e.timeSinceLastError=this.timeSinceLastError.getDeltaTime()),this.isAd()||(this.playtimeSinceLastEvent.startTime>0?e.playtimeSinceLastEvent=this.playtimeSinceLastEvent.getDeltaTime():e.playtimeSinceLastEvent=0,this.isPlaying?this.playtimeSinceLastEvent.start():this.playtimeSinceLastEvent.reset(),this.totalPlaytime+=e.playtimeSinceLastEvent,e.totalPlaytime=this.totalPlaytime);for(var t=0,r=Object.entries(this.customTimeSinceAttributes);t<r.length;t++){const n=a(r[t],2),i=n[0],s=n[1];e[i]=s.getDeltaTime()}return e}calculateBufferType(e){let t="";return t=e?"initial":this.isSeeking?"seek":this.isPaused?"pause":"connection",i.default.debug("Buffer Type = "+t),t}goViewCountUp(){this._viewCount++}goPlayerReady(){return!this.isPlayerReady&&(this.isPlayerReady=!0,!0)}goRequest(){return!this.isRequested&&(this.isRequested=!0,this.timeSinceLastAd.reset(),this.timeSinceRequested.start(),!0)}goStart(){return!(!this.isRequested||this.isStarted||(this.isAd()?this.numberOfAds++:this.numberOfVideos++,this.isStarted=!0,this.isPlaying=!0,this.timeSinceStarted.start(),this.playtimeSinceLastEvent.start(),0))}goEnd(){return!!this.isRequested&&(this.numberOfErrors=0,this.resetFlags(),this.timeSinceRequested.stop(),this.timeSinceStarted.stop(),this.playtimeSinceLastEvent.stop(),!0)}goPause(){return!(!this.isStarted||this.isPaused||(this.isPaused=!0,this.isPlaying=!1,this.timeSincePaused.start(),this.playtimeSinceLastEvent.stop(),this.timeSinceResumed.reset(),this.isBuffering&&(this._bufferAcc+=this.bufferElapsedTime.getDeltaTime()),this.elapsedTime.start(),0))}goResume(){return!(!this.isStarted||!this.isPaused||(this.isPaused=!1,this.isPlaying=!0,this.timeSincePaused.stop(),this.timeSinceResumed.start(),this._hb?(this._acc=this.elapsedTime.getDeltaTime(),this._hb=!1):(this.isBuffering&&this.bufferElapsedTime.start(),this._acc+=this.elapsedTime.getDeltaTime()),0))}goBufferStart(){return!(!this.isRequested||this.isBuffering||(this.isBuffering=!0,this.isPlaying=!1,this.timeSinceBufferBegin.start(),this.bufferElapsedTime.start(),0))}goBufferEnd(){return!(!this.isRequested||!this.isBuffering||(this.isBuffering=!1,this.isPlaying=!0,this.timeSinceBufferBegin.stop(),this._hb?(this._bufferAcc=this.bufferElapsedTime.getDeltaTime(),this._hb=!1):this._bufferAcc+=this.bufferElapsedTime.getDeltaTime(),0))}goSeekStart(){return!(!this.isStarted||this.isSeeking||(this.isSeeking=!0,this.isPlaying=!1,this.timeSinceSeekBegin.start(),this.timeSinceSeekEnd.reset(),0))}goSeekEnd(){return!(!this.isStarted||!this.isSeeking||(this.isSeeking=!1,this.isPlaying=!0,this.timeSinceSeekBegin.stop(),this.timeSinceSeekEnd.start(),0))}goAdBreakStart(){return!this.isAdBreak&&(this.isAdBreak=!0,this.timeSinceAdBreakStart.start(),!0)}goAdBreakEnd(){return!!this.isAdBreak&&(this.isRequested=!1,this.isAdBreak=!1,this.totalAdPlaytime=this.timeSinceAdBreakStart.getDeltaTime(),this.timeSinceAdBreakStart.stop(),!0)}goDownload(){this.timeSinceLastDownload.start()}goHeartbeat(){this.timeSinceLastHeartbeat.start()}goRenditionChange(){this.timeSinceLastRenditionChange.start()}goAdQuartile(){this.timeSinceLastAdQuartile.start()}goError(){this.isError=!0,this.numberOfErrors++,this.timeSinceLastError.start()}goAdError(){this.isError=!0,this.numberOfErrors++,this.timeSinceLastAdError.start()}goLastAd(){this.timeSinceLastAd.start()}}},7347:(e,t,r)=>{var n=r(3724),i=r(9565),s=r(8773),a=r(6980),o=r(5397),u=r(6969),c=r(9297),l=r(5917),d=Object.getOwnPropertyDescriptor;t.f=n?d:function(e,t){if(e=o(e),t=u(t),l)try{return d(e,t)}catch(e){}if(c(e,t))return a(!i(s.f,e,t),e[t])}},7400:e=>{e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},7413:(e,t,r)=>{r(9463),r(3792),r(1278),r(7495),r(3500),r(2953),Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.RetryQueueHandler=void 0;var n=a(r(6144)),i=r(2347),s=a(r(1051));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){c(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function c(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const d=s.default.MAX_PAYLOAD_SIZE,h=s.default.MAX_EVENTS_PER_BATCH;class f{constructor(){this.retryQueue=[],this.maxQueueSize=h,this.maxQueueSizeBytes=d}addFailedEvents(e){try{const s=Array.isArray(e)?e:[e];n.default.notice(`Adding ${s.length} failed events to retry queue`,{queueSizeBefore:this.retryQueue.length});var t,r=function(e){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,t){if(e){if("string"==typeof e)return l(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(e))){t&&(e=t);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==t.return||t.return()}finally{if(a)throw i}}}}(s);try{for(r.s();!(t=r.n()).done;){const e=t.value;this.retryQueue.length>=this.maxQueueSize&&this.evictOldestEvent();const r=(0,i.dataSize)(e);for(;(0,i.dataSize)(this.retryQueue)+r>this.maxQueueSizeBytes;)this.evictOldestEvent();this.retryQueue.push(u({},e))}}catch(e){r.e(e)}finally{r.f()}}catch(e){n.default.error("Failed to add events to retry queue:",e.message)}}discardEvent(e,t){n.default.warn("Discarded event",{reason:t,eventType:e.eventType})}evictOldestEvent(){if(this.retryQueue.length>0){const e=this.retryQueue.shift();this.discardEvent(e,"Queue full - evicted oldest")}}getRetryEventsToFit(e,t){const r=[];let n=0,s=0;for(let a=this.retryQueue.length-1;a>=0;a--){const o=this.retryQueue[a];if(s>=t)break;const u=(0,i.dataSize)(o);if(n+u>e)break;r.unshift(o),n+=u,s++,this.retryQueue.splice(a,1)}return r}getQueueSize(){return this.retryQueue.length}clear(){this.retryQueue=[]}}t.RetryQueueHandler=f,t.default=f},7433:(e,t,r)=>{var n=r(4376),i=r(3517),s=r(34),a=r(8227)("species"),o=Array;e.exports=function(e){var t;return n(e)&&(t=e.constructor,(i(t)&&(t===o||n(t.prototype))||s(t)&&null===(t=t[a]))&&(t=void 0)),void 0===t?o:t}},7476:(e,t,r)=>{var n=r(2195),i=r(9504);e.exports=function(e){if("Function"===n(e))return i(e)}},7495:(e,t,r)=>{var n=r(6518),i=r(7323);n({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},7629:(e,t,r)=>{var n=r(6395),i=r(4576),s=r(9433),a="__core-js_shared__",o=e.exports=i[a]||s(a,{});(o.versions||(o.versions=[])).push({version:"3.47.0",mode:n?"pure":"global",copyright:"Â© 2014-2025 Denis Pushkarev (zloirock.ru), 2025 CoreJS Company (core-js.io)",license:"https://github.com/zloirock/core-js/blob/v3.47.0/LICENSE",source:"https://github.com/zloirock/core-js"})},7633:(e,t,r)=>{var n=r(7751),i=r(2106),s=r(8227),a=r(3724),o=s("species");e.exports=function(e){var t=n(e);a&&t&&!t[o]&&i(t,o,{configurable:!0,get:function(){return this}})}},7657:(e,t,r)=>{var n,i,s,a=r(9039),o=r(4901),u=r(34),c=r(2360),l=r(2787),d=r(6840),h=r(8227),f=r(6395),p=h("iterator"),v=!1;[].keys&&("next"in(s=[].keys())?(i=l(l(s)))!==Object.prototype&&(n=i):v=!0),!u(n)||a(function(){var e={};return n[p].call(e)!==e})?n={}:f&&(n=c(n)),o(n[p])||d(n,p,function(){return this}),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:v}},7680:(e,t,r)=>{var n=r(9504);e.exports=n([].slice)},7696:(e,t,r)=>{var n=r(1291),i=r(8014),s=RangeError;e.exports=function(e){if(void 0===e)return 0;var t=n(e),r=i(t);if(t!==r)throw new s("Wrong length or index");return r}},7740:(e,t,r)=>{var n=r(9297),i=r(5031),s=r(7347),a=r(4913);e.exports=function(e,t,r){for(var o=i(t),u=a.f,c=s.f,l=0;l<o.length;l++){var d=o[l];n(e,d)||r&&n(r,d)||u(e,d,c(t,d))}}},7743:(e,t,r)=>{var n=r(6518),i=r(9565),s=r(9306),a=r(6043),o=r(1103),u=r(2652);n({target:"Promise",stat:!0,forced:r(537)},{race:function(e){var t=this,r=a.f(t),n=r.reject,c=o(function(){var a=s(t.resolve);u(e,function(e){i(a,t,e).then(r.resolve,n)})});return c.error&&n(c.value),r.promise}})},7750:(e,t,r)=>{var n=r(4117),i=TypeError;e.exports=function(e){if(n(e))throw new i("Can't call method on "+e);return e}},7751:(e,t,r)=>{var n=r(4576),i=r(4901);e.exports=function(e,t){return arguments.length<2?(r=n[e],i(r)?r:void 0):n[e]&&n[e][t];var r}},7782:e=>{e.exports=Math.sign||function(e){var t=+e;return 0===t||t!=t?t:t<0?-1:1}},7811:e=>{e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},7860:(e,t,r)=>{var n=r(2839);e.exports=/web0s(?!.*chrome)/i.test(n)},7979:(e,t,r)=>{var n=r(8551);e.exports=function(){var e=n(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},8014:(e,t,r)=>{var n=r(1291),i=Math.min;e.exports=function(e){var t=n(e);return t>0?i(t,9007199254740991):0}},8227:(e,t,r)=>{var n=r(4576),i=r(5745),s=r(9297),a=r(3392),o=r(4495),u=r(7040),c=n.Symbol,l=i("wks"),d=u?c.for||c:c&&c.withoutSetter||a;e.exports=function(e){return s(l,e)||(l[e]=o&&s(c,e)?c[e]:d("Symbol."+e)),l[e]}},8229:(e,t,r)=>{var n=r(9590),i=RangeError;e.exports=function(e,t){var r=n(e);if(r%t)throw new i("Wrong offset");return r}},8265:e=>{var t=function(){this.head=null,this.tail=null};t.prototype={add:function(e){var t={item:e,next:null},r=this.tail;r?r.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return null===(this.head=e.next)&&(this.tail=null),e.item}},e.exports=t},8319:e=>{var t=Math.round;e.exports=function(e){var r=t(e);return r<0?0:r>255?255:255&r}},8330:e=>{e.exports=JSON.parse('{"name":"@newrelic/video-core","version":"4.0.1","description":"New Relic video tracking core library","main":"./dist/cjs/index.js","module":"./dist/esm/index.js","scripts":{"build":"webpack --mode production","build:dev":"webpack --mode development","watch":"webpack --mode production --progress --color --watch","watch:dev":"webpack --progress --color --watch","clean":"rm -rf dist coverage doc","test":"nyc --reporter=html --reporter=text mocha --require @babel/register","doc":"jsdoc -c jsdoc.json -d documentation","deploy":"node scripts/deploy.js","third-party-updates":"oss third-party manifest --includeOptDeps && oss third-party notices --includeOptDeps && git add THIRD_PARTY_NOTICES.md third_party_manifest.json"},"repository":{"type":"git","url":"https://github.com/newrelic/video-core-js"},"author":"Jordi Aguilar","contributors":["Andreu SantarÃ©n Llop","Malay Chandan","Bharat Sarsawat"],"license":"Apache-2.0","devDependencies":{"@babel/core":"^7.24.5","@babel/plugin-transform-async-to-generator":"^7.27.1","@babel/plugin-transform-class-properties":"^7.27.1","@babel/plugin-transform-destructuring":"^7.28.5","@babel/plugin-transform-for-of":"^7.27.1","@babel/plugin-transform-modules-commonjs":"^7.24.1","@babel/plugin-transform-object-rest-spread":"^7.28.4","@babel/plugin-transform-object-super":"^7.27.1","@babel/plugin-transform-parameters":"^7.27.7","@babel/preset-env":"^7.24.5","@babel/register":"^7.24.6","@newrelic/newrelic-oss-cli":"^0.1.2","aws-sdk":"^2.920.0","babel-loader":"^9.1.3","chai":"^4.3.4","diff":"^5.0.0","jsdom":"^25.0.1","mocha":"^10.4.0","nyc":"^15.1.0","sinon":"^2.4.1","webpack":"^5.91.0","webpack-cli":"^4.9.2"},"files":["THIRD_PARTY_NOTICES.md","dist","src","CHANGELOG.md","LICENSE","README.md","src","!test"],"publishConfig":{"access":"public"},"dependencies":{"@babel/plugin-transform-nullish-coalescing-operator":"^7.27.1","@babel/plugin-transform-optional-chaining":"^7.27.1","core-js":"^3.46.0"}}')},8350:(e,t,r)=>{var n=r(6518),i=r(259),s=r(9306),a=r(8981),o=r(6198),u=r(1469);n({target:"Array",proto:!0},{flatMap:function(e){var t,r=a(this),n=o(r);return s(e),(t=u(r,0)).length=i(t,r,r,n,0,1,e,arguments.length>1?arguments[1]:void 0),t}})},8429:(e,t,r)=>{var n=r(9039),i=r(4576).RegExp,s=n(function(){var e=i("a","y");return e.lastIndex=2,null!==e.exec("abcd")}),a=s||n(function(){return!i("a","y").sticky}),o=s||n(function(){var e=i("^r","gy");return e.lastIndex=2,null!==e.exec("str")});e.exports={BROKEN_CARET:o,MISSED_STICKY:a,UNSUPPORTED_Y:s}},8480:(e,t,r)=>{var n=r(1828),i=r(8727).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},8490:e=>{var t=Array,r=Math.abs,n=Math.pow,i=Math.floor,s=Math.log,a=Math.LN2;e.exports={pack:function(e,o,u){var c,l,d,h=t(u),f=8*u-o-1,p=(1<<f)-1,v=p>>1,g=23===o?n(2,-24)-n(2,-77):0,y=e<0||0===e&&1/e<0?1:0,m=0;for((e=r(e))!=e||e===1/0?(l=e!=e?1:0,c=p):(c=i(s(e)/a),e*(d=n(2,-c))<1&&(c--,d*=2),(e+=c+v>=1?g/d:g*n(2,1-v))*d>=2&&(c++,d/=2),c+v>=p?(l=0,c=p):c+v>=1?(l=(e*d-1)*n(2,o),c+=v):(l=e*n(2,v-1)*n(2,o),c=0));o>=8;)h[m++]=255&l,l/=256,o-=8;for(c=c<<o|l,f+=o;f>0;)h[m++]=255&c,c/=256,f-=8;return h[m-1]|=128*y,h},unpack:function(e,t){var r,i=e.length,s=8*i-t-1,a=(1<<s)-1,o=a>>1,u=s-7,c=i-1,l=e[c--],d=127&l;for(l>>=7;u>0;)d=256*d+e[c--],u-=8;for(r=d&(1<<-u)-1,d>>=-u,u+=t;u>0;)r=256*r+e[c--],u-=8;if(0===d)d=1-o;else{if(d===a)return r?NaN:l?-1/0:1/0;r+=n(2,t),d-=o}return(l?-1:1)*r*n(2,d-t)}}},8551:(e,t,r)=>{var n=r(34),i=String,s=TypeError;e.exports=function(e){if(n(e))return e;throw new s(i(e)+" is not an object")}},8622:(e,t,r)=>{var n=r(4576),i=r(4901),s=n.WeakMap;e.exports=i(s)&&/native code/.test(String(s))},8686:(e,t,r)=>{var n=r(3724),i=r(9039);e.exports=n&&i(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},8727:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},8745:(e,t,r)=>{var n=r(616),i=Function.prototype,s=i.apply,a=i.call;e.exports="object"==typeof Reflect&&Reflect.apply||(n?a.bind(s):function(){return a.apply(s,arguments)})},8773:(e,t)=>{var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,i=n&&!r.call({1:2},1);t.f=i?function(e){var t=n(this,e);return!!t&&t.enumerable}:r},8814:(e,t,r)=>{var n=r(9039),i=r(4576).RegExp;e.exports=n(function(){var e=i("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")})},8845:(e,t,r)=>{var n=r(4576),i=r(9565),s=r(4644),a=r(6198),o=r(8229),u=r(8981),c=r(9039),l=n.RangeError,d=n.Int8Array,h=d&&d.prototype,f=h&&h.set,p=s.aTypedArray,v=s.exportTypedArrayMethod,g=!c(function(){var e=new Uint8ClampedArray(2);return i(f,e,{length:1,0:3},1),3!==e[1]}),y=g&&s.NATIVE_ARRAY_BUFFER_VIEWS&&c(function(){var e=new d(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]});v("set",function(e){p(this);var t=o(arguments.length>1?arguments[1]:void 0,1),r=u(e);if(g)return i(f,this,r,t);var n=this.length,s=a(r),c=0;if(s+t>n)throw new l("Wrong length");for(;c<s;)this[t+c]=r[c++]},!g||y)},8981:(e,t,r)=>{var n=r(7750),i=Object;e.exports=function(e){return i(n(e))}},9039:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},9167:(e,t,r)=>{var n=r(4576);e.exports=n},9213:(e,t,r)=>{var n=r(6080),i=r(9504),s=r(7055),a=r(8981),o=r(6198),u=r(1469),c=i([].push),l=function(e){var t=1===e,r=2===e,i=3===e,l=4===e,d=6===e,h=7===e,f=5===e||d;return function(p,v,g,y){for(var m,E,b=a(p),A=s(b),S=o(A),T=n(v,g),w=0,O=y||u,R=t?O(p,S):r||h?O(p,0):void 0;S>w;w++)if((f||w in A)&&(E=T(m=A[w],w,b),e))if(t)R[w]=E;else if(E)switch(e){case 3:return!0;case 5:return m;case 6:return w;case 2:c(R,m)}else switch(e){case 4:return!1;case 7:c(R,m)}return d?-1:i||l?l:R}};e.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)}},9225:(e,t,r)=>{var n,i,s,a,o=r(4576),u=r(8745),c=r(6080),l=r(4901),d=r(9297),h=r(9039),f=r(397),p=r(7680),v=r(4055),g=r(2812),y=r(9544),m=r(6193),E=o.setImmediate,b=o.clearImmediate,A=o.process,S=o.Dispatch,T=o.Function,w=o.MessageChannel,O=o.String,R=0,_={},P="onreadystatechange";h(function(){n=o.location});var D=function(e){if(d(_,e)){var t=_[e];delete _[e],t()}},x=function(e){return function(){D(e)}},I=function(e){D(e.data)},L=function(e){o.postMessage(O(e),n.protocol+"//"+n.host)};E&&b||(E=function(e){g(arguments.length,1);var t=l(e)?e:T(e),r=p(arguments,1);return _[++R]=function(){u(t,void 0,r)},i(R),R},b=function(e){delete _[e]},m?i=function(e){A.nextTick(x(e))}:S&&S.now?i=function(e){S.now(x(e))}:w&&!y?(a=(s=new w).port2,s.port1.onmessage=I,i=c(a.postMessage,a)):o.addEventListener&&l(o.postMessage)&&!o.importScripts&&n&&"file:"!==n.protocol&&!h(L)?(i=L,o.addEventListener("message",I,!1)):i=P in v("script")?function(e){f.appendChild(v("script"))[P]=function(){f.removeChild(this),D(e)}}:function(e){setTimeout(x(e),0)}),e.exports={set:E,clear:b}},9296:(e,t,r)=>{var n=r(4055)("span").classList,i=n&&n.constructor&&n.constructor.prototype;e.exports=i===Object.prototype?void 0:i},9297:(e,t,r)=>{var n=r(9504),i=r(8981),s=n({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return s(i(e),t)}},9302:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=c(r(8330)),i=c(r(1568)),s=c(r(6455)),a=c(r(1051)),o=r(1487),u=c(r(6144));function c(e){return e&&e.__esModule?e:{default:e}}class l extends i.default{constructor(e){super(),this.customData={},this.heartbeat=null,this.parentTracker=null,this._trackerReadyChrono=new s.default,this._trackerReadyChrono.start(),this._actionTable=a.default.ACTION_TABLE,this._actionAdTable=a.default.ACTION_AD_TABLE,e=e||{},this.setOptions(e)}setOptions(e){e&&(e.parentTracker&&(this.parentTracker=e.parentTracker),e.customData&&(this.customData=e.customData),e.heartbeat&&(this.heartbeat=e.heartbeat))}dispose(){this.unregisterListeners()}registerListeners(){}unregisterListeners(){}getHeartbeat(){return this.state._isAd?2e3:this.heartbeat?this.heartbeat:this.parentTracker&&this.parentTracker.heartbeat?this.parentTracker.heartbeat:3e4}startHeartbeat(){this._heartbeatInterval=setInterval(this.sendHeartbeat.bind(this),Math.max(this.getHeartbeat(),2e3))}stopHeartbeat(){this._heartbeatInterval&&clearInterval(this._heartbeatInterval)}sendHeartbeat(e){this.sendVideoAction(l.Events.HEARTBEAT,e)}getAttributes(e,t){(e=e||{}).trackerName=this.getTrackerName(),e.trackerVersion=this.getTrackerVersion(),e.coreVersion=n.default.version,e.timeSinceTrackerReady=this._trackerReadyChrono.getDeltaTime();for(let t in this.customData)e[t]=this.customData[t];return null!=document.hidden&&(e.isBackgroundEvent=document.hidden),e}getTrackerVersion(){return n.default.version}getTrackerName(){return"base-tracker"}sendVideoAction(e,t){this.emit("VideoAction",e,this.getAttributes(t))}sendVideoAdAction(e,t){this.emit("VideoAdAction",e,this.getAttributes(t))}sendVideoErrorAction(e,t){let r=this.isAd()?"adError":"videoError";this.emit("VideoErrorAction",e,this.getAttributes(t,r))}sendVideoCustomAction(e,t){this.emit("VideoCustomAction",e,this.getAttributes(t,"customAction"))}setHarvestInterval(e){if(o.videoAnalyticsHarvester)try{o.videoAnalyticsHarvester.setHarvestInterval(e)}catch(e){return void u.default.error("Failed to set harvest interval:",e.message)}else u.default.error("VideoAnalyticsHarvester is not available")}}l.Events={HEARTBEAT:"HEARTBEAT"},t.default=l},9306:(e,t,r)=>{var n=r(4901),i=r(6823),s=TypeError;e.exports=function(e){if(n(e))return e;throw new s(i(e)+" is not a function")}},9433:(e,t,r)=>{var n=r(4576),i=Object.defineProperty;e.exports=function(e,t){try{i(n,e,{value:t,configurable:!0,writable:!0})}catch(r){n[e]=t}return t}},9463:(e,t,r)=>{var n=r(6518),i=r(3724),s=r(4576),a=r(9504),o=r(9297),u=r(4901),c=r(1625),l=r(655),d=r(2106),h=r(7740),f=s.Symbol,p=f&&f.prototype;if(i&&u(f)&&(!("description"in p)||void 0!==f().description)){var v={},g=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:l(arguments[0]),t=c(p,this)?new f(e):void 0===e?f():f(e);return""===e&&(v[t]=!0),t};h(g,f),g.prototype=p,p.constructor=g;var y="Symbol(description detection)"===String(f("description detection")),m=a(p.valueOf),E=a(p.toString),b=/^Symbol\((.*)\)[^)]+$/,A=a("".replace),S=a("".slice);d(p,"description",{configurable:!0,get:function(){var e=m(this);if(o(v,e))return"";var t=E(e),r=y?S(t,7,-1):A(t,b,"$1");return""===r?void 0:r}}),n({global:!0,constructor:!0,forced:!0},{Symbol:g})}},9504:(e,t,r)=>{var n=r(616),i=Function.prototype,s=i.call,a=n&&i.bind.bind(s,s);e.exports=n?a:function(e){return function(){return s.apply(e,arguments)}}},9519:(e,t,r)=>{var n,i,s=r(4576),a=r(2839),o=s.process,u=s.Deno,c=o&&o.versions||u&&u.version,l=c&&c.v8;l&&(i=(n=l.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!i&&a&&(!(n=a.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/))&&(i=+n[1]),e.exports=i},9539:(e,t,r)=>{var n=r(9565),i=r(8551),s=r(5966);e.exports=function(e,t,r){var a,o;i(e);try{if(!(a=s(e,"return"))){if("throw"===t)throw r;return r}a=n(a,e)}catch(e){o=!0,a=e}if("throw"===t)throw r;if(o)throw a;return i(a),r}},9544:(e,t,r)=>{var n=r(2839);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(n)},9565:(e,t,r)=>{var n=r(616),i=Function.prototype.call;e.exports=n?i.bind(i):function(){return i.apply(i,arguments)}},9590:(e,t,r)=>{var n=r(1291),i=RangeError;e.exports=function(e){var t=n(e);if(t<0)throw new i("The argument can't be less than 0");return t}},9617:(e,t,r)=>{var n=r(5397),i=r(5610),s=r(6198),a=function(e){return function(t,r,a){var o=n(t),u=s(o);if(0===u)return!e&&-1;var c,l=i(a,u);if(e&&r!=r){for(;u>l;)if((c=o[l++])!=c)return!0}else for(;u>l;l++)if((e||l in o)&&o[l]===r)return e||l||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}}},i={};function s(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={exports:{}};return n[e].call(r.exports,r,r.exports,s),r.exports}s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();var a={};(()=>{var e=a;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=y(s(4399)),r=y(s(1051)),n=y(s(6455)),i=y(s(6144)),o=y(s(1568)),u=y(s(9302)),c=y(s(3793)),l=y(s(7328)),d=s(2431),h=s(7413),f=s(1028),p=s(4374),v=s(1449),g=s(8330);function y(e){return e&&e.__esModule?e:{default:e}}const m={Constants:r.default,Chrono:n.default,Log:i.default,Emitter:o.default,Tracker:u.default,VideoTracker:c.default,VideoTrackerState:l.default,Core:t.default,version:g.version,NrVideoEventAggregator:d.NrVideoEventAggregator,RetryQueueHandler:h.RetryQueueHandler,OptimizedHttpClient:f.OptimizedHttpClient,HarvestScheduler:p.HarvestScheduler,recordEvent:v.recordEvent};e.default=m})();const o=a.__esModule}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,r),s.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{var e=n;e.default=void 0;var t,i=(t=r(302))&&t.__esModule?t:{default:t};e.default=i.default})(),n.default})());
//# sourceMappingURL=newrelic-video-html5.min.js.map
